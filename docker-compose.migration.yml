# Docker Compose override for migration phases
# This file extends docker-compose.yml to use multi-stage Dockerfiles
# Usage: docker compose -f docker-compose.yml -f docker-compose.migration.yml up

services:
  php:
    build:
      context: .
      dockerfile: Dockerfile.php
      target: php81-dev
      args:
        PHP_VERSION: "8.1"
    # Keep image name for compatibility, but will use build instead
    # image: 'akeneo/pim-php-dev:8.1'

  httpd:
    build:
      context: .
      dockerfile: Dockerfile.php
      target: php81-dev
      args:
        PHP_VERSION: "8.1"
    # Keep image name for compatibility, but will use build instead
    # image: 'akeneo/pim-php-dev:8.1'

  node:
    build:
      context: .
      dockerfile: Dockerfile.node
      target: node18
      args:
        NODE_VERSION: "18"
    # Keep image name for compatibility, but will use build instead
    # image: 'akeneo/node:18'
