time="2026-01-14T18:25:40+01:00" level=warning msg="/home/gplanchat/PhpstormProjects/kiboko/akeneo/pim-community-dev/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
time="2026-01-14T18:25:40+01:00" level=warning msg="Found orphan containers ([pim-community-dev-rabbitmq-1]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
PHP Deprecated:  Symfony\Bridge\Doctrine\ContainerAwareEventManager::dispatchEvent(): Implicitly marking parameter $eventArgs as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/doctrine-bridge/ContainerAwareEventManager.php on line 52
PHP Deprecated:  Symfony\Component\HttpKernel\Controller\ControllerResolver::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/Controller/ControllerResolver.php on line 28
PHP Deprecated:  Symfony\Component\HttpKernel\Controller\ContainerControllerResolver::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/Controller/ContainerControllerResolver.php on line 28
PHP Deprecated:  Symfony\Component\HttpKernel\Controller\ArgumentResolver::__construct(): Implicitly marking parameter $argumentMetadataFactory as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/Controller/ArgumentResolver.php on line 36
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\LocaleListener::__construct(): Implicitly marking parameter $router as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/LocaleListener.php on line 38
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\ErrorListener::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/ErrorListener.php on line 44
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\ErrorListener::logException(): Implicitly marking parameter $logLevel as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/ErrorListener.php on line 158
PHP Deprecated:  Symfony\Component\HttpKernel\HttpKernel::__construct(): Implicitly marking parameter $requestStack as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/HttpKernel.php on line 58
PHP Deprecated:  Symfony\Component\HttpKernel\HttpKernel::__construct(): Implicitly marking parameter $argumentResolver as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/HttpKernel.php on line 58
PHP Deprecated:  Symfony\Component\HttpKernel\HttpKernel::terminateWithException(): Implicitly marking parameter $request as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/HttpKernel.php on line 103
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\AbstractSessionListener::__construct(): Implicitly marking parameter $container as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/AbstractSessionListener.php on line 55
PHP Deprecated:  Symfony\Bundle\FrameworkBundle\Translation\Translator::addResource(): Implicitly marking parameter $domain as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/framework-bundle/Translation/Translator.php on line 123
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\DebugHandlersListener::__construct(): Implicitly marking parameter $exceptionHandler as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/DebugHandlersListener.php on line 52
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\DebugHandlersListener::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/DebugHandlersListener.php on line 52
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\DebugHandlersListener::configure(): Implicitly marking parameter $event as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/DebugHandlersListener.php on line 76
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\RouterListener::__construct(): Implicitly marking parameter $context as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/RouterListener.php on line 58
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\RouterListener::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/RouterListener.php on line 58
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\RouterListener::__construct(): Implicitly marking parameter $projectDir as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/RouterListener.php on line 58
PHP Deprecated:  Symfony\Component\HttpKernel\EventListener\RouterListener::setCurrentRequest(): Implicitly marking parameter $request as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/EventListener/RouterListener.php on line 76
PHP Deprecated:  Symfony\Bridge\Monolog\Handler\ConsoleHandler::__construct(): Implicitly marking parameter $output as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/monolog-bridge/Handler/ConsoleHandler.php on line 63
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\Token\Storage\TokenStorageInterface::setToken(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/Token/Storage/TokenStorageInterface.php on line 35
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\Token\Storage\TokenStorage::setToken(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/Token/Storage/TokenStorage.php on line 46
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\AuthenticationTrustResolverInterface::isAnonymous(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/AuthenticationTrustResolverInterface.php on line 35
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\AuthenticationTrustResolverInterface::isRememberMe(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/AuthenticationTrustResolverInterface.php on line 43
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\AuthenticationTrustResolverInterface::isFullFledged(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/AuthenticationTrustResolverInterface.php on line 50
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\AuthenticationTrustResolver::isAuthenticated(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/AuthenticationTrustResolver.php on line 25
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\AuthenticationTrustResolver::isAnonymous(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/AuthenticationTrustResolver.php on line 35
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\AuthenticationTrustResolver::isRememberMe(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/AuthenticationTrustResolver.php on line 47
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\AuthenticationTrustResolver::isFullFledged(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/AuthenticationTrustResolver.php on line 55
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::__construct(): Implicitly marking parameter $requestStack as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 37
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::__construct(): Implicitly marking parameter $router as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 37
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::__construct(): Implicitly marking parameter $tokenStorage as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 37
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::registerListener(): Implicitly marking parameter $csrfTokenManager as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 53
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::registerListener(): Implicitly marking parameter $context as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 53
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::getLogoutPath(): Implicitly marking parameter $key as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 63
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::getLogoutUrl(): Implicitly marking parameter $key as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 73
PHP Deprecated:  Symfony\Component\Security\Http\Logout\LogoutUrlGenerator::setCurrentFirewall(): Implicitly marking parameter $context as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Logout/LogoutUrlGenerator.php on line 78
PHP Deprecated:  Symfony\Component\Security\Http\Firewall\ContextListener::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Firewall/ContextListener.php on line 63
PHP Deprecated:  Symfony\Component\Security\Http\Firewall\ContextListener::__construct(): Implicitly marking parameter $dispatcher as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Firewall/ContextListener.php on line 63
PHP Deprecated:  Symfony\Component\Security\Http\Firewall\ContextListener::__construct(): Implicitly marking parameter $trustResolver as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Firewall/ContextListener.php on line 63
PHP Deprecated:  Symfony\Component\Security\Http\Firewall\ContextListener::__construct(): Implicitly marking parameter $sessionTrackerEnabler as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-http/Firewall/ContextListener.php on line 63
PHP Deprecated:  FOS\RestBundle\EventListener\BodyListener::__construct(): Implicitly marking parameter $arrayNormalizer as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/friendsofsymfony/rest-bundle/EventListener/BodyListener.php on line 40
PHP Deprecated:  Symfony\Component\HttpFoundation\RequestMatcher::__construct(): Implicitly marking parameter $path as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-foundation/RequestMatcher.php on line 61
PHP Deprecated:  Symfony\Component\HttpFoundation\RequestMatcher::__construct(): Implicitly marking parameter $host as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-foundation/RequestMatcher.php on line 61
PHP Deprecated:  Symfony\Component\HttpFoundation\RequestMatcher::__construct(): Implicitly marking parameter $port as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-foundation/RequestMatcher.php on line 61
PHP Deprecated:  Monolog\Logger::addRecord(): Implicitly marking parameter $datetime as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/monolog/monolog/src/Monolog/Logger.php on line 328
PHP Deprecated:  Symfony\Component\HttpKernel\Log\DebugLoggerInterface::getLogs(): Implicitly marking parameter $request as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/Log/DebugLoggerInterface.php on line 32
PHP Deprecated:  Symfony\Component\HttpKernel\Log\DebugLoggerInterface::countErrors(): Implicitly marking parameter $request as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/http-kernel/Log/DebugLoggerInterface.php on line 39
PHP Deprecated:  Symfony\Bridge\Monolog\Logger::getLogs(): Implicitly marking parameter $request as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/monolog-bridge/Logger.php on line 28
PHP Deprecated:  Symfony\Bridge\Monolog\Logger::countErrors(): Implicitly marking parameter $request as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/monolog-bridge/Logger.php on line 40
PHP Deprecated:  Symfony\Component\Routing\Router::__construct(): Implicitly marking parameter $context as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/routing/Router.php on line 100
PHP Deprecated:  Symfony\Component\Routing\Router::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/routing/Router.php on line 100
PHP Deprecated:  Symfony\Component\Routing\Router::__construct(): Implicitly marking parameter $defaultLocale as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/routing/Router.php on line 100
PHP Deprecated:  Symfony\Bundle\FrameworkBundle\Routing\Router::__construct(): Implicitly marking parameter $context as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/framework-bundle/Routing/Router.php on line 43
PHP Deprecated:  Symfony\Bundle\FrameworkBundle\Routing\Router::__construct(): Implicitly marking parameter $parameters as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/framework-bundle/Routing/Router.php on line 43
PHP Deprecated:  Symfony\Bundle\FrameworkBundle\Routing\Router::__construct(): Implicitly marking parameter $logger as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/framework-bundle/Routing/Router.php on line 43
PHP Deprecated:  Symfony\Bundle\FrameworkBundle\Routing\Router::__construct(): Implicitly marking parameter $defaultLocale as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/framework-bundle/Routing/Router.php on line 43
PHP Deprecated:  Symfony\Component\Security\Core\Authentication\Token\Storage\UsageTrackingTokenStorage::setToken(): Implicitly marking parameter $token as nullable is deprecated, the explicit nullable type must be used instead in /srv/pim/vendor/symfony/security-core/Authentication/Token/Storage/UsageTrackingTokenStorage.php on line 53
@javascript
Feature: Create a channel
  In order to be able to export data to a new channel
  As an administrator
  I need to be able to create a channel

  @critical
  Scenario: Successfully create a channel                                                             # tests/legacy/features/channel/create_channel.feature:8
    Given a "footwear" catalog configuration                                                          # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Peter"                                                                     # Context\NavigationContext::iAmLoggedInAs()
    When I am on the channel creation page                                                            # Context\NavigationContext::iAmOnThePage()
    Then I should see the Code, English (United States), Currencies, Locales and Category tree fields # Context\AssertionContext::iShouldSeeTheFields()
    And I should not see the "History" tab                                                            # Context\WebUser::iShouldNotSeeTheTab()
    And I fill in the following information:                                                          # Context\WebUser::iFillInTheFollowingInformation()
      | Code                    | foo             |
      | Category tree           | 2014 collection |
      | Currencies              | EUR             |
      | Locales                 | French          |
      | English (United States) | Bar Bar         |
    And I press the "Save" button                                                                     # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."                                       # Context\AssertionContext::assertPageNotContainsText()
    And I should see the text "Bar Bar"                                                               # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Edit a channel
  In order to manage existing channels in the catalog
  As an administrator
  I need to be able to edit a channel

  Background:                                # tests/legacy/features/channel/edit_channel.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()

  @critical
  Scenario: Successfully edit a channel to enable a locale and disable unused locales when deleting a channel # tests/legacy/features/channel/edit_channel.feature:11
    Given I am logged in as "Peter"                                                                           # Context\NavigationContext::iAmLoggedInAs()
    When I am on the "tablet" channel page                                                                    # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I change the "Locales" to "Breton (France)"                                                           # Context\WebUser::iChangeTheTo()
    And I press the "Save" button                                                                             # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."                                               # Context\AssertionContext::assertPageNotContainsText()
    And I am on the locales page                                                                              # Context\NavigationContext::iAmOnThePage()
    Then the grid should contain 3 elements                                                                   # Context\DataGridContext::theGridShouldContainElement()
    And I should see locales "en_US", "br_FR" and "fr_FR"                                                     # Context\DataGridContext::iShouldSeeEntities()
    When I am on the "tablet" channel page                                                                    # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I press the secondary action "Delete"                                                                 # Pim\Behat\Context\Domain\SecondaryActionsContext::iPressTheSecondaryAction()
    And I confirm the deletion                                                                                # Context\WebUser::iConfirmThe()
    And I am on the locales page                                                                              # Context\NavigationContext::iAmOnThePage()
    Then the grid should contain 2 element                                                                    # Context\DataGridContext::theGridShouldContainElement()
    And I should see locale "en_US" and "fr_FR"                                                               # Context\DataGridContext::iShouldSeeEntities()

@javascript
Feature: Create a category
  In order to provide a tree of my product categories
  As a product manager
  I need to be able to create a new category tree or a sub-category

  Background:                                 # tests/legacy/features/pim/enrichment/category/create_a_category.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"             # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Create a category tree                   # tests/legacy/features/pim/enrichment/category/create_a_category.feature:12
    Given I am on the categories page                # Context\NavigationContext::iAmOnThePage()
    When I press the "Create tree" button            # Context\WebUser::iPressTheButton()
    And I create the category with code shoe         # Pim\Behat\Context\Domain\Structure\CategoryContext::iCreateTheCategoryWithCode()
    Then I should see the text "[shoe]"              # Context\AssertionContext::assertPageContainsText()
    And I should see the text "successfully created" # Context\AssertionContext::assertPageContainsText()

  @critical
  Scenario: Create a sub-category                             # tests/legacy/features/pim/enrichment/category/create_a_category.feature:20
    Given I am on the category tree "default" page            # Context\NavigationContext::iAmOnTheCategoryTreePage()
    When I hover over the category tree item "Master catalog" # Pim\Behat\Context\Domain\Structure\CategoryContext::iHoverOverTheCategoryTreeItem()
    And I press the "New category" button                     # Context\WebUser::iPressTheButton()
    And I create the category with code shoe                  # Pim\Behat\Context\Domain\Structure\CategoryContext::iCreateTheCategoryWithCode()
    Then I should see the text "[shoe]"                       # Context\AssertionContext::assertPageContainsText()
    And I should see the text "successfully created"          # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Export categories
  In order to be able to access and modify category data outside PIM
  As a product manager
  I need to be able to import and export categories

  @critical
  Scenario: Successfully export categories in CSV                                                       # tests/legacy/features/pim/enrichment/category/export_categories_csv.feature:8
    Given a "footwear" catalog configuration                                                            # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following job "csv_footwear_category_export" configuration:                                 # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%tmp%/category_export/category_export.csv"} |
    And I am logged in as "Julia"                                                                       # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "csv_footwear_category_export" export job page                                      # Context\NavigationContext::iAmOnTheExportJobPage()
    When I launch the export job                                                                        # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_category_export" job to finish                                     # Context\WebUser::iWaitForTheJobToFinish()
    Then file "%tmp%/category_export/category_export.csv" should contain 6 rows                         # Context\AssertionContext::fileShouldContainRows()
    And the category order in the file "%tmp%/category_export/category_export.csv" should be following: # Context\WebUser::theCategoryOrderInTheFileShouldBeFollowing()
      | 2014_collection   |
      | summer_collection |
      | sandals           |
      | winter_collection |
      | winter_boots      |

Feature: Import categories
  In order to reuse the categories of my products
  As a product manager
  I need to be able to import categories

  @critical @javascript
  Scenario: Successfully import categories in CSV and skipped lines with no parent                                                  # tests/legacy/features/pim/enrichment/category/import_categories.feature:7
    Given the "footwear" catalog configuration                                                                                      # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                                                                                                   # Context\NavigationContext::iAmLoggedInAs()
    And the following CSV file to import:                                                                                           # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;parent;label-en_US
      default;;
      computers;;Computers
      laptops;computers;Laptops
      hard_drives;laptops;Hard drives
      tshirts;clothes;T-shirts
      printed_tshirts;tshirts;Printed T-shirts
      pc;computers;PC
      """
    And the following job "csv_footwear_category_import" configuration:                                                             # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    When I am on the "csv_footwear_category_import" import job page                                                                 # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                                                                                     # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_category_import" job to finish                                                                 # Context\WebUser::iWaitForTheJobToFinish()
    Then I should see the text "Property \"parent\" expects a valid category code. The category does not exist, \"clothes\" given." # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Property \"parent\" expects a valid category code. The category does not exist, \"tshirts\" given."  # Context\AssertionContext::assertPageContainsText()
    And there should be the following categories:                                                                                   # Context\FixturesContext::thereShouldBeTheFollowingCategories()
      | code        | label       | parent    |
      | computers   | Computers   |           |
      | laptops     | Laptops     | computers |
      | hard_drives | Hard drives | laptops   |
      | pc          | PC          | computers |
    And there should be 10 categories                                                                                               # Context\FixturesContext::thereShouldBeCategories()

@javascript
Feature: List categories
  In order to be able to see the categories in my catalog
  As a product manager
  I need to be able to list existing categories

  Background:                                # tests/legacy/features/pim/enrichment/category/list_categories.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"            # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Navigate to edit category page                 # tests/legacy/features/pim/enrichment/category/list_categories.feature:12
    Given I am on the categories page                      # Context\NavigationContext::iAmOnThePage()
    When I follow the "2014 collection" category tree      # Pim\Behat\Context\Domain\Structure\CategoryContext::iFollowTheCategoryTree()
    Then I should see the text "2014 collection"           # Context\AssertionContext::assertPageContainsText()
    And I follow the "Summer collection" category          # Pim\Behat\Context\Domain\Structure\CategoryContext::iFollowTheCategory()
    Then the field Code should contain "summer_collection" # Context\WebUser::theFieldShouldContain()

@javascript
Feature: Add products to a group
  In order to manage existing groups for the catalog
  As a product manager
  I need to be able to add products to a group

  Background:                                  # tests/legacy/features/pim/enrichment/product-group/add_products_to_a_group.feature:7
    Given the "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following product groups:          # Context\FixturesContext::theFollowingProductGroups()
      | code       | label-en_US | type  |
      | CROSS_SELL | Cross Sell  | XSELL |
    And the following products:                # Context\FixturesContext::theFollowingProduct()
      | sku             | family  | categories        | size | color |
      | sandal-white-37 | sandals | winter_collection | 37   | white |
      | sandal-white-38 | sandals | winter_collection | 38   | white |
      | sandal-white-39 | sandals | winter_collection | 39   | white |
    And I am logged in as "Julia"              # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully add products in groups                   # tests/legacy/features/pim/enrichment/product-group/add_products_to_a_group.feature:20
    Given I am on the "CROSS_SELL" product group page             # Pim\Behat\Context\Domain\Enrich\ProductGroupContext::iAmOnTheGroupEditPage()
    And I should see products sandal-white-37 and sandal-white-38 # Context\DataGridContext::iShouldSeeEntities()
    And I should see the filters family, in_group and enabled     # Context\DataGridContext::iShouldSeeTheFilters()
    And I check the row "sandal-white-37"                         # Context\DataGridContext::iCheckTheRows()
    And I check the row "sandal-white-38"                         # Context\DataGridContext::iCheckTheRows()
    And I save the group                                          # Context\WebUser::iSave()
    Then the row "sandal-white-37" should be checked              # Context\DataGridContext::theRowShouldBeChecked()
    And the row "sandal-white-38" should be checked               # Context\DataGridContext::theRowShouldBeChecked()

@javascript
Feature: Add children to product model
  In order to enrich the catalog
  As a regular user
  I need to be able to add children to a product model

  Background:                                        # tests/legacy/features/pim/enrichment/product-model/add_product_model_children.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:                    # Context\FixturesContext::theFollowingAttributes()
      | code            | label-en_US     | localizable | scopable | type                            | reference_data_name | group |
      | reference_color | Reference color | 0           | 0        | pim_reference_data_simpleselect | color               | other |
    And I am logged in as "Julia"                    # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully add a sub product model with one axis to a root product model # tests/legacy/features/pim/enrichment/product-model/add_product_model_children.feature:15
    Given I am on the "apollon" product model page                                     # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()
    When I open the variant navigation children selector for level 1                   # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iOpenTheVariantNavigationChildrenSelectorForLevel()
    And I press the "Add new" button and wait for modal                                # Context\WebUser::iPressTheButton()
    Then I should see the text "Add a new Color"                                       # Context\AssertionContext::assertPageContainsText()
    When I fill in the following child information:                                    # Context\WebUser::iFillInTheFollowingChildInformation()
      | Code (required)      | apollon_black |
      | Color (variant axis) | Black         |
    And I confirm the child creation                                                   # Context\WebUser::iConfirmThe()
    Then I should be on the product model "apollon_black" edit page                    # Context\NavigationContext::iShouldBeOnTheProductModelEditPage()

  @critical @purge-messenger
  Scenario: Successfully add a variant product to a root product model # tests/legacy/features/pim/enrichment/product-model/add_product_model_children.feature:79
    Given I am on the "amor" product model page                        # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()
    When I open the variant navigation children selector for level 1   # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iOpenTheVariantNavigationChildrenSelectorForLevel()
    And I press the "Add new" button and wait for modal                # Context\WebUser::iPressTheButton()
    Then I should see the text "Add a new Color, Size"                 # Context\AssertionContext::assertPageContainsText()
    When I fill in the following child information:                    # Context\WebUser::iFillInTheFollowingChildInformation()
      | SKU                  | amor_black_xl |
      | Color (variant axis) | Black         |
      | Size (variant axis)  | XL            |
    And I confirm the child creation                                   # Context\WebUser::iConfirmThe()
    Then I should be on the product "amor_black_xl" edit page          # Context\NavigationContext::iShouldBeOnTheProductEditPage()
    And 1 event of type "product.created" should have been raised      # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Successfully add a variant product to a sub product model # tests/legacy/features/pim/enrichment/product-model/add_product_model_children.feature:93
    Given I am on the "apollon_blue" product model page               # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()
    When I open the variant navigation children selector for level 2  # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iOpenTheVariantNavigationChildrenSelectorForLevel()
    And I press the "Add new" button and wait for modal               # Context\WebUser::iPressTheButton()
    Then I should see the text "Add a new Size"                       # Context\AssertionContext::assertPageContainsText()
    When I fill in the following child information:                   # Context\WebUser::iFillInTheFollowingChildInformation()
      | SKU                 | apollon_blue_xl |
      | Size (variant axis) | XL              |
    And I confirm the child creation                                  # Context\WebUser::iConfirmThe()
    Then I should be on the product "apollon_blue_xl" edit page       # Context\NavigationContext::iShouldBeOnTheProductEditPage()

@javascript
Feature: Create a product model
  In order to add a non-imported product model
  As a product manager
  I need to be able to manually create a product model

  Background:                                        # tests/legacy/features/pim/enrichment/product-model/create_product_model.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                    # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                    # Context\NavigationContext::iAmOnTheGrid()

  @critical @purge-messenger
  Scenario: Create a product model with a single level variant          # tests/legacy/features/pim/enrichment/product-model/create_product_model.feature:13
    When I create a product model                                       # Context\WebUser::iCreateAProductModel()
    And I should see the Code, Family and Variant fields                # Context\AssertionContext::iShouldSeeTheFields()
    And the field Variant (required) should be disabled                 # Context\AssertionContext::theFieldsShouldBeDisabled()
    When I fill in the following information in the popin:              # Context\WebUser::iFillInTheFollowingInformation()
      | Code    | shoes_variant |
      | Family  | Shoes         |
      | Variant | Shoes by size |
    And I press the "Save" button                                       # Context\WebUser::iPressTheButton()
    And I should be on the product model "shoes_variant" edit page      # Context\NavigationContext::iShouldBeOnTheProductModelEditPage()
    And I should see the text "shoes_variant"                           # Context\AssertionContext::assertPageContainsText()
    And 1 event of type "product_model.created" should have been raised # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Create a product model with multiple level variant               # tests/legacy/features/pim/enrichment/product-model/create_product_model.feature:27
    When I create a product model                                            # Context\WebUser::iCreateAProductModel()
    And I should see the Code, Family and Variant fields                     # Context\AssertionContext::iShouldSeeTheFields()
    And the field Variant (required) should be disabled                      # Context\AssertionContext::theFieldsShouldBeDisabled()
    When I fill in the following information in the popin:                   # Context\WebUser::iFillInTheFollowingInformation()
      | Code    | clothing_color_and_size    |
      | Family  | Clothing                   |
      | Variant | Clothing by color and size |
    And I press the "Save" button                                            # Context\WebUser::iPressTheButton()
    And I should be on the product model "clothing_color_and_size" edit page # Context\NavigationContext::iShouldBeOnTheProductModelEditPage()
    And I should see the text "clothing_color_and_size"                      # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Edit a product model
  In order to enrich the catalog
  As a regular user
  I need to be able edit and save a product model

  Background:                                        # tests/legacy/features/pim/enrichment/product-model/edit_product_model.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()

  @critical @purge-messenger
  Scenario: Successfully edit and save a root product model                 # tests/legacy/features/pim/enrichment/product-model/edit_product_model.feature:16
    Given I am logged in as "Mary"                                          # Context\NavigationContext::iAmLoggedInAs()
    And I edit the "amor" product model                                     # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()
    And I visit the "Marketing" group                                       # Context\WebUser::iVisitTheGroup()
    And I fill in the following information:                                # Context\WebUser::iFillInTheFollowingInformation()
      | Model name | Heritage jacket navy chilly tiki |
    When I press the "Save" button                                          # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."             # Context\AssertionContext::assertPageNotContainsText()
    And the product Model name should be "Heritage jacket navy chilly tiki" # Context\WebUser::theProductFieldValueShouldBe()
    And 0 event of type "product.updated" should have been raised           # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()
    And 1 event of type "product_model.updated" should have been raised     # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical @purge-messenger
  Scenario: Successfully edit and save a sub product model              # tests/legacy/features/pim/enrichment/product-model/edit_product_model.feature:29
    Given I am logged in as "Mary"                                      # Context\NavigationContext::iAmLoggedInAs()
    And I edit the "apollon_blue" product model                         # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()
    And I visit the "Marketing" group                                   # Context\WebUser::iVisitTheGroup()
    And I fill in the following information:                            # Context\WebUser::iFillInTheFollowingInformation()
      | Variation Name | Apollonito blue |
    When I press the "Save" button                                      # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."         # Context\AssertionContext::assertPageNotContainsText()
    And the product Variation Name should be "Apollonito blue"          # Context\WebUser::theProductFieldValueShouldBe()
    And 0 event of type "product.updated" should have been raised       # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()
    And 1 event of type "product_model.updated" should have been raised # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Parent attributes of a sub product model are read only                      # tests/legacy/features/pim/enrichment/product-model/edit_product_model.feature:42
    Given I am logged in as "Mary"                                                      # Context\NavigationContext::iAmLoggedInAs()
    And I edit the "apollon_blue" product model                                         # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()
    When I visit the "Marketing" group                                                  # Context\WebUser::iVisitTheGroup()
    Then the field Model name should be read only                                       # Context\WebUser::theFieldShouldBeReadOnly()
    And the field Model description should be read only                                 # Context\WebUser::theFieldShouldBeReadOnly()
    When I visit the "Medias" group                                                     # Context\WebUser::iVisitTheGroup()
    Then the field Notice should be read only                                           # Context\WebUser::theFieldShouldBeReadOnly()
    And I should see the text "This attribute can be updated in the common attributes." # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Edit product model and filter attributes
  In order to be efficient when enriching product models
  As a regular user
  I need to be able to edit a product model and choose which attributes are displayed

  Background:                                          # tests/legacy/features/pim/enrichment/product-model/edit_product_model_and_filter_attributes.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following root product models:             # Context\FixturesContext::theFollowingRootProductModels()
      | code      | family_variant | collection  |
      | model-nin | clothing_color | summer_2016 |
    And I am logged in as "Julia"                      # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "model-nin" product model page     # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()

  @critical
  Scenario: Edit the product model and show only missing required attributes # tests/legacy/features/pim/enrichment/product-model/edit_product_model_and_filter_attributes.feature:16
    When I filter attributes with "All missing required attributes"          # Context\WebUser::iFilterAttributes()
    And I visit the "All" group                                              # Context\WebUser::iVisitTheGroup()
    Then I should not see the text "Collection"                              # Context\AssertionContext::assertPageNotContainsText()
    But I should see the text "Model description"                            # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Model picture"                                # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Size"                                         # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Wash temperature"                             # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Care instructions"                            # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Material"                                     # Context\AssertionContext::assertPageContainsText()
    When I filter attributes with "All attributes"                           # Context\WebUser::iFilterAttributes()
    Then I should see the text "Collection"                                  # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Export variant products through CSV export
  In order to export shoes of the collection 2016 to my ecommerce channel
  As a product manager
  I need to be able to export product models as a CSV file

  Background:                                          # tests/legacy/features/pim/enrichment/product-model/export/export_product_models_csv.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                      # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Export product models through CSV                                        # tests/legacy/features/pim/enrichment/product-model/export/export_product_models_csv.feature:12
    Given the following associations for the product model "amor":                   # Context\FixturesContext::theFollowingAssociationsForTheProductModel()
      | type   | products   |
      | X_SELL | 1111111175 |
      | X_SELL | 1111111176 |
      | UPSELL | 1111111177 |
    And the following associations for the product model "plain":                    # Context\FixturesContext::theFollowingAssociationsForTheProductModel()
      | type   | products   |
      | X_SELL | 1111111175 |
    And the following associations for the product model "plain_red":                # Context\FixturesContext::theFollowingAssociationsForTheProductModel()
      | type   | products   |
      | X_SELL | 1111111176 |
    And I am on the "csv_product_model_export" export job edit page                  # Context\NavigationContext::iAmOnTheExportJobEditPage()
    And I visit the "Content" tab                                                    # Context\WebUser::iVisitTheTab()
    And I filter by "identifier" with operator "" and value "amor, plain, plain_red" # Context\DataGridContext::iFilterBy()
    And I press the "Save" button                                                    # Context\WebUser::iPressTheButton()
    And I should not see the text "There are unsaved changes"                        # Context\AssertionContext::assertPageNotContainsText()
    And I launch the export job                                                      # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_product_model_export" job to finish                      # Context\WebUser::iWaitForTheJobToFinish()
    Then exported file of "csv_product_model_export" should contain the lines:       # Pim\Behat\Context\Domain\Spread\ExportProfilesContext::exportedFileOfShouldContainTheLines()
      """
      code;family_variant;parent;categories;brand;care_instructions;collection;color;COMPATIBILITY-groups;COMPATIBILITY-products;COMPATIBILITY-product_models;composition;description-en_US-ecommerce;erp_name-en_US;image;keywords-en_US;material;meta_description-en_US;meta_title-en_US;name-en_US;notice;PACK-groups;PACK-products;PACK-product_models;price-EUR;price-USD;SUBSTITUTION-groups;SUBSTITUTION-products;SUBSTITUTION-product_models;supplier;UPSELL-groups;UPSELL-products;UPSELL-product_models;variation_image;variation_name-en_US;wash_temperature;weight;weight-unit;X_SELL-groups;X_SELL-products;X_SELL-product_models
      amor;clothing_colorsize;;master_men_blazers,supplier_zaro;;;summer_2016;;;;;;"Heritage jacket navy blue tweed suit with single breasted 2 button. 53% wool, 22% polyester, 18% acrylic, 5% nylon, 1% cotton, 1% viscose. Dry Cleaning uniquement.Le mannequin measuring 1m85 and wears UK size 40, size 50 FR";Amor;;;;;;"Heritage jacket navy";;;;;999.00;;;;;zaro;;1111111177;;;;800;;;;1111111175,1111111176;
      plain;clothing_color_size;;tshirts;;;summer_2017;;;;;;;Plain;;;;;;plain;;;;;;;;;;;;;;;;;;;;1111111175;
      plain_red;clothing_color_size;plain;tshirts;;;summer_2017;red;;;;;;Plain;;;;;;plain;;;;;;;;;;;;;;files/plain_red/variation_image/plain_red.jpg;"Plain red ";;;;;1111111175,1111111176;
      """

Feature: Create product models through CSV import
  In order to setup my application
  As a product manager
  I need to be able to import new product models

  Background:                                          # tests/legacy/features/pim/enrichment/product-model/import/csv/create_product_model.feature:6
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()

  @critical @purge-messenger
  Scenario: Julia imports new root products models in CSV                                      # tests/legacy/features/pim/enrichment/product-model/import/csv/create_product_model.feature:10
    Given the following CSV file to import:                                                    # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;parent;family_variant;categories;collection;description-en_US-ecommerce;erp_name-en_US;price;color;name-en_US;composition;size;ean;sku;weight
      code-001;;clothing_colorsize;master_men;Spring2017;description;Blazers_1654;100 EUR;;;;;;;
      """
    When the product models are imported via the job csv_catalog_modeling_product_model_import # Pim\Behat\Context\ImportExportFileContext::entitiesAreImportedViaTheJob()
    Then there should be the following root product model:                                     # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldHaveTheFollowingValues()
      | code     | categories | family_variant     | collection   | description-en_US-ecommerce | erp_name-en_US | price      |
      | code-001 | master_men | clothing_colorsize | [Spring2017] | description                 | Blazers_1654   | 100.00 EUR |
    And 1 event of type "product_model.created" should have been raised                        # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Julia imports new products sub product models in CSV                               # tests/legacy/features/pim/enrichment/product-model/import/csv/create_product_model.feature:23
    Given the following CSV file to import:                                                    # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;parent;family_variant;categories;collection;description-en_US-ecommerce;erp_name-en_US;price;color;variation_name-en_US;composition;size;ean;sku;weight
      code-001;;clothing_color_size;master_men;Spring2017;description;Blazers_1654;100 EUR;;;;;;;
      code-002;code-001;clothing_color_size;master_men_blazers;;;;;blue;Blazers;composition;;;;
      """
    When the product models are imported via the job csv_catalog_modeling_product_model_import # Pim\Behat\Context\ImportExportFileContext::entitiesAreImportedViaTheJob()
    Then there should be the following root product model:                                     # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldHaveTheFollowingValues()
      | code     | categories | family_variant      | collection   | description-en_US-ecommerce | erp_name-en_US | price      |
      | code-001 | master_men | clothing_color_size | [Spring2017] | description                 | Blazers_1654   | 100.00 EUR |
    And there should be the following product model:                                           # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldHaveTheFollowingValues()
      | code     | color  | variation_name-en_US | composition |
      | code-002 | [blue] | Blazers              | composition |

@javascript
Feature: Update product models through CSV import
  In order to setup my application
  As a product manager
  I need to be able to update existing product models

  Background:                                          # tests/legacy/features/pim/enrichment/product-model/import/csv/update_product_model.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                      # Context\NavigationContext::iAmLoggedInAs()

  @critical @purge-messenger
  Scenario: Julia successfully updates an exiting root product model through CSV import # tests/legacy/features/pim/enrichment/product-model/import/csv/update_product_model.feature:12
    Given the following root product model:                                             # Context\FixturesContext::theFollowingRootProductModels()
      | code     | parent | family_variant      | categories | collection | description-en_US-ecommerce | erp_name-en_US | price   | color | variation_name-en_US | composition |
      | code-001 |        | clothing_color_size | master_men | Spring2017 | description                 | Blazers_1654   | 100 EUR |       |                      |             |
    And the following CSV file to import:                                               # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;parent;family_variant;categories;collection;description-en_US-ecommerce;erp_name-en_US;price;color;name-en_US;composition;size;ean;sku;weight
      code-001;;clothing_color_size;master_men;Spring2017;A new description;Blazers_1654;50 EUR;;;;;;;
      """
    And the following job "csv_catalog_modeling_product_model_import" configuration:    # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage           | {"type": "local", "file_path": "%file to import%"} |
      | enabledComparison | no                                                 |
    When I am on the "csv_catalog_modeling_product_model_import" import job page        # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                                         # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_catalog_modeling_product_model_import" job to finish        # Context\WebUser::iWaitForTheJobToFinish()
    Then there should be the following root product model:                              # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldHaveTheFollowingValues()
      | code     | categories | family_variant      | collection   | description-en_US-ecommerce | erp_name-en_US | price     |
      | code-001 | master_men | clothing_color_size | [Spring2017] | A new description           | Blazers_1654   | 50.00 EUR |
    And 1 event of type "product_model.updated" should have been raised                 # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical @purge-messenger
  Scenario: Julia successfully updates an exiting product sub product model through CSV import # tests/legacy/features/pim/enrichment/product-model/import/csv/update_product_model.feature:33
    Given the following root product model:                                                    # Context\FixturesContext::theFollowingRootProductModels()
      | code     | parent | family_variant      | categories | collection | description-en_US-ecommerce | erp_name-en_US | price   |
      | code-001 |        | clothing_color_size | master_men | Spring2017 | description                 | Blazers_1654   | 100 EUR |
    And the following sub product model:                                                       # Context\FixturesContext::theFollowingSubProductModels()
      | code     | parent   | family_variant      | categories         | color | variation_name-en_US | composition |
      | code-002 | code-001 | clothing_color_size | master_men_blazers | blue  | Blazers              | composition |
    And the following CSV file to import:                                                      # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;parent;family_variant;categories;collection;description-en_US-ecommerce;erp_name-en_US;price;color;variation_name-en_US;composition;size;ean;sku;weight
      code-002;code-001;clothing_color_size;master_men_blazers;;A new description for a sub model;;;blue;Beautiful blazers;composition;;;;
      """
    And the following job "csv_catalog_modeling_product_model_import" configuration:           # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage           | {"type": "local", "file_path": "%file to import%"} |
      | enabledComparison | no                                                 |
    When I am on the "csv_catalog_modeling_product_model_import" import job page               # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                                                # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_catalog_modeling_product_model_import" job to finish               # Context\WebUser::iWaitForTheJobToFinish()
    Then there should be the following root product model:                                     # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldHaveTheFollowingValues()
      | code     | categories | family_variant      | collection   | description-en_US-ecommerce | erp_name-en_US | price      |
      | code-001 | master_men | clothing_color_size | [Spring2017] | description                 | Blazers_1654   | 100.00 EUR |
    And there should be the following product model:                                           # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldHaveTheFollowingValues()
      | code     | color  | variation_name-en_US | composition |
      | code-002 | [blue] | Beautiful blazers    | composition |
    And 1 event of type "product_model.updated" should have been raised                        # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

@javascript
Feature: Create product models through CSV import and update their descendants
  In order to import product model
  As a catalog manager
  I need to be able to import product models and update their descendants

  Background:                                                                        # tests/legacy/features/pim/enrichment/product-model/import/import_and_compute_descendants.feature:7
    Given the "catalog_modeling" catalog configuration                               # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following CSV file to import:                                            # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;family_variant;parent;supplier;price-EUR;care_instructions;wash_temperature;color;composition
      model-tshirt-divided;clothing_color_size;;zaro;20;Machine-washable;400;;
      model-tshirt-divided-navy-blue;clothing_color_size;model-tshirt-divided;;;;;navy_blue;100% cotton
      """
    And the following job "csv_catalog_modeling_product_model_import" configuration: # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    And I am logged in as "Julia"                                                    # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully compute products' completenesses of the product models  # tests/legacy/features/pim/enrichment/product-model/import/import_and_compute_descendants.feature:20
    Given I am on the "tshirt-divided-navy-blue-m" product page                  # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "Completeness" column tab                                    # Context\WebUser::iVisitTheColumnTab()
    Then I should see the completeness:                                          # Pim\Behat\Context\Domain\Enrich\CompletenessContext::iShouldSeeTheCompletenessInThePanel()
      | channel   | locale                  | ratio |
      | Ecommerce | German (Germany)        | 63 %  |
      | Ecommerce | English (United States) | 72 %  |
      | Ecommerce | French (France)         | 63 %  |
    When I am on the "csv_catalog_modeling_product_model_import" import job page # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                                  # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_catalog_modeling_product_model_import" job to finish # Context\WebUser::iWaitForTheJobToFinish()
    Then I should see the text "processed 1"                                     # Context\AssertionContext::assertPageContainsText()
    When I am on the "tshirt-divided-navy-blue-m" product page                   # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "Completeness" column tab                                    # Context\WebUser::iVisitTheColumnTab()
    Then I should see the completeness:                                          # Pim\Behat\Context\Domain\Enrich\CompletenessContext::iShouldSeeTheCompletenessInThePanel()
      | channel   | locale                  | ratio |
      | Ecommerce | German (Germany)        | 90 %  |
      | Ecommerce | English (United States) | 100 % |
      | Ecommerce | French (France)         | 90 %  |

@javascript
Feature: Create product models through CSV import
  In order to import product model
  As a catalog manager
  I need to be able to import product models with valid data

  Background:                                          # tests/legacy/features/pim/enrichment/product-model/import/import_business_rules.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                      # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Only the attributes with values defined as "common attributes" in the family variant are updated. # tests/legacy/features/pim/enrichment/product-model/import/import_business_rules.feature:44
    Given the following CSV file to import:                                                                   # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;parent;family_variant;categories;collection;description-en_US-ecommerce;erp_name-en_US;price;color;variation_name-en_US;composition;size;ean;sku;weight
      code-001;;clothing_color_size;master_men;Spring2017;description;Blazers_1654;100 EUR;blue;Blazers;composition;;;;
      """
    And the following job "csv_catalog_modeling_product_model_import" configuration:                          # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    When I am on the "csv_catalog_modeling_product_model_import" import job page                              # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                                                               # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_catalog_modeling_product_model_import" job to finish                              # Context\WebUser::iWaitForTheJobToFinish()
    Then the product model "code-001" should not have the following values "composition, name-en_US, color"   # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldNotHaveTheFollowingValues()

  @critical
  Scenario: Only the attributes with values defined as variant attributes level 1 in the family variant are updated.                        # tests/legacy/features/pim/enrichment/product-model/import/import_business_rules.feature:58
    Given the following CSV file to import:                                                                                                 # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;parent;family_variant;categories;collection;description-en_US-ecommerce;erp_name-en_US;price;color;variation_name-en_US;composition;size;ean;sku;weight
      code-001;;clothing_color_size;master_men;Spring2017;description;Blazers_1654;100 EUR;;;;;;;
      code-002;code-001;clothing_color_size;master_men_blazers;Spring2017;description;Blazers_1654;100 EUR;blue;Blazers;composition;;;;
      """
    And the following job "csv_catalog_modeling_product_model_import" configuration:                                                        # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    When I am on the "csv_catalog_modeling_product_model_import" import job page                                                            # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                                                                                             # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_catalog_modeling_product_model_import" job to finish                                                            # Context\WebUser::iWaitForTheJobToFinish()
    Then the product model "code-002" should not have the following values "collection, description-en_US-ecommerce, erp_name-en_US, price" # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldNotHaveTheFollowingValues()

Feature: Update product models when importing families
  In order to enrich correctly my catalog
  As a product manager
  I need to update the product models when families are imported

  @critical @javascript
  Scenario: Successfully update an existing family computes all product models data in a dedicated step for csv # tests/legacy/features/pim/enrichment/product-model/import/update_product_models_when_importing_families.feature:10
    Given the "catalog_modeling" catalog configuration                                                          # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                                                                               # Context\NavigationContext::iAmLoggedInAs()
    And the product model value material of "model-braided-hat" should be "wool"                                # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the following CSV file to import:                                                                       # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      code;label-de_DE;label-en_US;label-fr_FR;attributes;attribute_as_image;attribute_as_label;requirements-ecommerce;requirements-mobile;requirements-print
      accessories;Accessories;Accessories;Accessories;brand,collection,color,composition,ean,erp_name,image,keywords,meta_description,meta_title,name,notice,price,size,sku,supplier,variation_image,variation_name,weight;image;name;name,sku,variation_name,weight;collection,name,sku,variation_name,weight;collection,name,sku,variation_name,weight
      """
    And the following job "csv_catalog_modeling_family_import" configuration:                                   # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    When I am on the "csv_catalog_modeling_family_import" import job page                                       # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                                                                 # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_catalog_modeling_family_import" job to finish                                       # Context\WebUser::iWaitForTheJobToFinish()
    And I should see the text "Family import"                                                                   # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Compute root product models data"                                                # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Compute sub product models data"                                                 # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Compute products data"                                                           # Context\AssertionContext::assertPageContainsText()
    And the product model "model-braided-hat" should not have the following values "material"                   # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldNotHaveTheFollowingValues()
    And there should only be the following job instance executed:                                               # Pim\Behat\Context\JobContext::thereShouldBeTheFollowingJobInstanceExecuted()
      | job_instance                       | times |
      | csv_catalog_modeling_family_import | 1     |

@javascript
Feature: Navigate among variant entities
  In order to be able to add and remove associations
  As a product manager
  I need to be able to navigate among variant entities on the product edit form

  Background:                                        # tests/legacy/features/pim/enrichment/product-model/navigate_among_variant_entities.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                    # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Browse ascendant and descendant entities on 1 level of variation        # tests/legacy/features/pim/enrichment/product-model/navigate_among_variant_entities.feature:50
    When I edit the "brooksblue" product model                                      # Pim\Behat\Context\Domain\Enrich\ProductModelContext::iAmOnTheProductModelEditPage()
    Then the variant navigation selected axis values for level 0 should be "Common" # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::theVariantNavigationSelectedAxisValuesForLevelShouldBe()
    And the variant navigation axis name for level 1 should be "EU shoes size"      # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::theVariantNavigationAxisNameForLevelShouldBe()
    When I open the variant navigation children selector for level 1                # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iOpenTheVariantNavigationChildrenSelectorForLevel()
    Then I should see the "41" element in the variant children selector for level 1 # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iShouldSeeTheElementInTheVariantChildrenSelectorForLevel()
    And I should see the "42" element in the variant children selector for level 1  # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iShouldSeeTheElementInTheVariantChildrenSelectorForLevel()
    And I should see the "43" element in the variant children selector for level 1  # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iShouldSeeTheElementInTheVariantChildrenSelectorForLevel()
    When I select the child "42" for level 1                                        # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iSelectTheChildForLevel()
    Then I should be on the product "1111111287" edit page                          # Context\NavigationContext::iShouldBeOnTheProductEditPage()
    And the variant navigation selected axis values for level 0 should be "Common"  # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::theVariantNavigationSelectedAxisValuesForLevelShouldBe()
    And the variant navigation axis name for level 1 should be "EU shoes size"      # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::theVariantNavigationAxisNameForLevelShouldBe()
    And the variant navigation selected axis values for level 1 should be "42"      # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::theVariantNavigationSelectedAxisValuesForLevelShouldBe()
    And I should see the text "Brooks blue"                                         # Context\AssertionContext::assertPageContainsText()
    When I navigate to the selected element for level 0                             # Pim\Behat\Context\Domain\Enrich\VariantNavigationContext::iNavigateToTheSelectedElementForLevel()
    Then I should be on the product model "brooksblue" edit page                    # Context\NavigationContext::iShouldBeOnTheProductModelEditPage()

@javascript
Feature: Navigate to product model and product edit pages
  In order to enrich the catalog
  As a regular user
  I need to be able to navigate to the product model and product edit pages

  @critical
  Scenario: Successfully navigate to a product model and a product edit page    # tests/legacy/features/pim/enrichment/product-model/navigate_product_and_product_model_edit_page.feature:8
    Given a "catalog_modeling" catalog configuration                            # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                                               # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                                               # Context\NavigationContext::iAmOnTheGrid()
    And I type "color" in the manage filter input                               # Context\DataGridContext::iTypeInTheManageFilterInput()
    And I show the filter "color"                                               # Context\DataGridContext::iShowTheFilter()
    And I filter by "color" with operator "in list" and value "Crimson red"     # Context\DataGridContext::iFilterBy()
    When I click on the "tshirt-unique-size-crimson-red" row                    # Context\DataGridContext::iClickOnTheRow()
    Then I should see the title "Product tshirt-unique-size-crimson-red | Edit" # Context\AssertionContext::iShouldSeeTheTitle()
    When I am on the products grid                                              # Context\NavigationContext::iAmOnTheGrid()
    And I click on the "model-tshirt-divided-crimson-red" row                   # Context\DataGridContext::iClickOnTheRow()
    Then I should see the title "Product model Divided crimson red | Edit"      # Context\AssertionContext::iShouldSeeTheTitle()

@javascript
Feature: Display the completeness of a product
  In order to see the completeness of a product in the catalog
  As a product manager
  I need to be able to display the completeness of a product

  Background:                                             # tests/legacy/features/pim/enrichment/product/completeness/display_completeness.feature:7
    Given a "footwear" catalog configuration              # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I add the "french" locale to the "tablet" channel # Context\FixturesContext::iAddTheLocaleToTheChannel()
    And I add the "french" locale to the "mobile" channel # Context\FixturesContext::iAddTheLocaleToTheChannel()
    And the following products:                           # Context\FixturesContext::theFollowingProduct()
      | sku      | family   | manufacturer | weather_conditions | color | name-en_US | name-fr_FR  | price          | rating | size | lace_color  |
      | sneakers | sneakers | Converse     | hot                | blue  | Sneakers   | Espadrilles | 69 EUR, 99 USD | 4      | 43   | laces_white |
      | sandals  | sandals  |              |                    | white |            | Sandales    |                |        |      |             |
    And the following product values:                     # Context\FixturesContext::theFollowingProductValues()
      | product  | attribute   | value                 | locale | scope  |
      | sneakers | description | Great sneakers        | en_US  | mobile |
      | sneakers | description | Really great sneakers | en_US  | tablet |
      | sneakers | description | Grandes espadrilles   | fr_FR  | mobile |
      | sandals  | description | Super sandales        | fr_FR  | tablet |
      | sandals  | description | Super sandales        | fr_FR  | mobile |
    And I am logged in as "Julia"                         # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully display the completeness of the products                     # tests/legacy/features/pim/enrichment/product/completeness/display_completeness.feature:25
    Given I am on the "sneakers" product page                                         # Context\NavigationContext::iAmOnTheProductEditPage()
    When I visit the "Completeness" column tab                                        # Context\WebUser::iVisitTheColumnTab()
    And I should see the completeness:                                                # Pim\Behat\Context\Domain\Enrich\CompletenessContext::iShouldSeeTheCompletenessInThePanel()
      | channel | locale                  | ratio |
      | Tablet  | English (United States) | 88 %  |
      | Tablet  | French (France)         | 77 %  |
      | Mobile  | English (United States) | 100 % |
      | Mobile  | French (France)         | 100 % |
    When I am on the products grid                                                    # Context\NavigationContext::iAmOnTheGrid()
    Then I am on the "sandals" product page                                           # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "Attributes" column tab                                           # Context\WebUser::iVisitTheColumnTab()
    And the Name, Description fields should be highlighted                            # Pim\Behat\Context\Domain\Enrich\AttributeTabContext::theFieldShouldBeHighlighted()
    And the Manufacturer, SKU fields should not be highlighted                        # Pim\Behat\Context\Domain\Enrich\AttributeTabContext::theFieldShouldBeHighlighted()
    And the Product information, Marketing, Sizes, Media groups should be highlighted # Pim\Behat\Context\Domain\Enrich\AttributeTabContext::theGroupShouldBeHighlighted()
    And the Colors group should not be highlighted                                    # Pim\Behat\Context\Domain\Enrich\AttributeTabContext::theGroupShouldBeHighlighted()
    And I visit the "Completeness" column tab                                         # Context\WebUser::iVisitTheColumnTab()
    And I visit the "Attributes" column tab                                           # Context\WebUser::iVisitTheColumnTab()
    When I switch the locale to "fr_FR"                                               # Context\WebUser::iSwitchTheLocaleTo()
    And I visit the "Completeness" column tab                                         # Context\WebUser::iVisitTheColumnTab()
    And I should see the completeness:                                                # Pim\Behat\Context\Domain\Enrich\CompletenessContext::iShouldSeeTheCompletenessInThePanel()
      | channel  | locale                  | ratio |
      | Tablette | English (United States) | 25 %  |
      | Tablette | French (France)         | 50 %  |
      | Mobile   | English (United States) | 40 %  |
      | Mobile   | French (France)         | 60 %  |

  @critical
  Scenario: Successfully display the completeness of the products in the grid # tests/legacy/features/pim/enrichment/product/completeness/display_completeness.feature:53
    Given I am on the products grid                                           # Context\NavigationContext::iAmOnTheGrid()
    When I switch the locale to "en_US"                                       # Context\WebUser::iSwitchTheLocaleTo()
    And I switch the scope to "Mobile"                                        # Context\WebUser::iSwitchTheScopeTo()
    Then the row "sneakers" should contain:                                   # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 100%  |
    And the row "sandals" should contain:                                     # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 40%   |
    When I switch the scope to "Tablet"                                       # Context\WebUser::iSwitchTheScopeTo()
    Then the row "sneakers" should contain:                                   # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 88%   |
    And the row "sandals" should contain:                                     # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 25%   |
    When I switch the locale to "fr_FR"                                       # Context\WebUser::iSwitchTheLocaleTo()
    And I switch the scope to "Mobile"                                        # Context\WebUser::iSwitchTheScopeTo()
    Then the row "sneakers" should contain:                                   # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 100%  |
    And the row "sandals" should contain:                                     # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 60%   |
    When I switch the scope to "Tablet"                                       # Context\WebUser::iSwitchTheScopeTo()
    Then the row "sneakers" should contain:                                   # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 77%   |
    And the row "sandals" should contain:                                     # Context\DataGridContext::theRowShouldContain()
      | column   | value |
      | complete | 50%   |

@javascript
Feature: Datagrid views
  In order to easily manage different views in the datagrid
  As a regular user
  I need to be able to create, update, apply and remove datagrid views

  Background:                                # tests/legacy/features/pim/enrichment/product/datagrid/datagrid_views.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku             | family   | name-en_US      | manufacturer |
      | purple-sneakers | sneakers | Purple sneakers | Nike         |
      | black-sneakers  | sneakers | Black sneakers  |              |
      | black-boots     | boots    | Black boots     |              |
    And I am logged in as "Mary"             # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully display values in grid when using a custom default view # tests/legacy/features/pim/enrichment/product/datagrid/datagrid_views.feature:113
    Given I am on the products grid                                              # Context\NavigationContext::iAmOnTheGrid()
    And I display the columns SKU, Name, Family and Manufacturer                 # Context\DataGridContext::iDisplayTheColumns()
    Then I should see the text "Nike"                                            # Context\AssertionContext::assertPageContainsText()
    When I create the view:                                                      # Context\DataGridContext::iCreateTheView()
      | new-view-label | With name |
    Then I should be on the products page                                        # Context\NavigationContext::iShouldBeOnTheProductsPage()
    And I should see the flash message "Datagrid view successfully created"      # Context\AssertionContext::iShouldSeeTheFlashMessage()
    When I edit the "Mary" user                                                  # Context\NavigationContext::iAmOnTheUserEditPage()
    And I visit the "Additional" tab                                             # Context\WebUser::iVisitTheTab()
    Then I should see the text "Default product grid view"                       # Context\AssertionContext::assertPageContainsText()
    When I fill in the following information:                                    # Context\WebUser::iFillInTheFollowingInformation()
      | Default product grid view | With name |
    And I press the "Save" button                                                # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."                  # Context\AssertionContext::assertPageNotContainsText()
    And I logout                                                                 # Context\NavigationContext::iLogout()
    And I am logged in as "Mary"                                                 # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                                                # Context\NavigationContext::iAmOnTheGrid()
    And I open the category tree                                                 # Context\WebUser::iToggleTheCategoryTree()
    And I filter by "category" with operator "unclassified" and value ""         # Context\DataGridContext::iFilterBy()
    Then the row "purple-sneakers" should contain:                               # Context\DataGridContext::theRowShouldContain()
      | column | value           |
      | Name   | Purple sneakers |
      | Family | Sneakers        |
    And the row "black-sneakers" should contain:                                 # Context\DataGridContext::theRowShouldContain()
      | column | value          |
      | Name   | Black sneakers |
      | Family | Sneakers       |
    And the row "black-boots" should contain:                                    # Context\DataGridContext::theRowShouldContain()
      | column | value       |
      | Name   | Black boots |
      | Family | Boots       |

  @critical
  Scenario: Successfully display the default view if my custom default view has been deleted # tests/legacy/features/pim/enrichment/product/datagrid/datagrid_views.feature:147
    Given I am on the products grid                                                          # Context\NavigationContext::iAmOnTheGrid()
    And I filter by "family" with operator "in list" and value "Boots"                       # Context\DataGridContext::iFilterBy()
    And I create the view:                                                                   # Context\DataGridContext::iCreateTheView()
      | new-view-label | Boots only |
    Then I should be on the products page                                                    # Context\NavigationContext::iShouldBeOnTheProductsPage()
    And I should see the flash message "Datagrid view successfully created"                  # Context\AssertionContext::iShouldSeeTheFlashMessage()
    When I logout                                                                            # Context\NavigationContext::iLogout()
    And I am logged in as "Julia"                                                            # Context\NavigationContext::iAmLoggedInAs()
    And I edit the "Julia" user                                                              # Context\NavigationContext::iAmOnTheUserEditPage()
    And I visit the "Additional" tab                                                         # Context\WebUser::iVisitTheTab()
    Then I should see the text "Default product grid view"                                   # Context\AssertionContext::assertPageContainsText()
    When I fill in the following information:                                                # Context\WebUser::iFillInTheFollowingInformation()
      | Default product grid view | Boots only |
    And I press the "Save" button                                                            # Context\WebUser::iPressTheButton()
    And I am on the products grid                                                            # Context\NavigationContext::iAmOnTheGrid()
    Then I should see the text "Boots only"                                                  # Context\AssertionContext::assertPageContainsText()
    When I logout                                                                            # Context\NavigationContext::iLogout()
    And I am logged in as "Mary"                                                             # Context\NavigationContext::iAmLoggedInAs()
    When I am on the products grid                                                           # Context\NavigationContext::iAmOnTheGrid()
    And I apply the "Boots only" view                                                        # Context\DataGridContext::iApplyTheView()
    And I delete the view                                                                    # Context\DataGridContext::iDeleteTheView()
    And I confirm the deletion                                                               # Context\WebUser::iConfirmThe()
    Then I should be on the products page                                                    # Context\NavigationContext::iShouldBeOnTheProductsPage()
    And I should see the flash message "Datagrid view successfully removed"                  # Context\AssertionContext::iShouldSeeTheFlashMessage()
    And I should see the text "Default view"                                                 # Context\AssertionContext::assertPageContainsText()
    When I logout                                                                            # Context\NavigationContext::iLogout()
    And I am logged in as "Julia"                                                            # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                                                            # Context\NavigationContext::iAmOnTheGrid()
    And I should see the text "Default view"                                                 # Context\AssertionContext::assertPageContainsText()
    But I should not see the text "Boots only"                                               # Context\AssertionContext::assertPageNotContainsText()

@javascript
Feature: Filter product and product models
  In order to filter and show product and product models in the same grid
  As a regular user
  I need to be able to show and filter products and product models in the catalog

  Background:                                          # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_and_product_models.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Mary"                       # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter and display both products and product models                                                                              # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_and_product_models.feature:12
    Given I am on the products grid                                                                                                                       # Context\NavigationContext::iAmOnTheGrid()
    When I show the filter "color"                                                                                                                        # Context\DataGridContext::iShowTheFilter()
    And I filter by "color" with operator "in list" and value "Crimson red"                                                                               # Context\DataGridContext::iFilterBy()
    Then I should see products tshirt-unique-size-crimson-red, running-shoes-xxs-crimson-red, running-shoes-m-crimson-red, running-shoes-xxxl-crimson-red # Context\DataGridContext::iShouldSeeEntities()
    And I should see the product models model-tshirt-divided-crimson-red, model-tshirt-unique-color-kurt                                                  # Context\DataGridContext::iShouldSeeEntities()
    And the row "model-tshirt-divided-crimson-red" should contain:                                                                                        # Context\DataGridContext::theRowShouldContain()
      | column   | value                            |
      | ID       | model-tshirt-divided-crimson-red |
      | label    | Divided crimson red              |
      | family   | Clothing                         |
      | Status   |                                  |
      | complete | N/A                              |
    And the row "running-shoes-xxs-crimson-red" should contain:                                                                                           # Context\DataGridContext::theRowShouldContain()
      | column   | value                         |
      | ID       | running-shoes-xxs-crimson-red |
      | label    | Running shoes XXS             |
      | family   | Shoes                         |
      | Status   | Enabled                       |
      | complete | 62%                           |

@javascript
Feature: Filter products by category
  In order to enrich my catalog
  As a regular user
  I need to be able to manually filter products by category

  Background:                                # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_category.feature:8
    Given an "apparel" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku           | categories             |
      | purple-tshirt | women_2015, women_2014 |
      | green-tshirt  | women_2015             |
      | akeneo-mug    |                        |
      | blue-jeans    | men_2015_summer        |
    And I am logged in as "Mary"             # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter products by category                      # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_category.feature:19
    Given I am on the products grid                                       # Context\NavigationContext::iAmOnTheGrid()
    When I open the category tree                                         # Context\WebUser::iToggleTheCategoryTree()
    And I select the "2015 collection" tree                               # Pim\Behat\Context\Domain\TreeContext::iSelectTheTree()
    Then I should see products purple-tshirt, green-tshirt and blue-jeans # Context\DataGridContext::iShouldSeeEntities()
    When I uncheck the "Include sub-categories" switch                    # Context\WebUser::iCheckTheSwitch()
    Then I should be able to use the following filters:                   # Context\DataGridContext::iShouldBeAbleToUseTheFollowingFilters()
      | filter   | operator     | value                   | result                         |
      | category |              | 2015 women's collection | purple-tshirt and green-tshirt |
      | category |              | 2015 men's collection   |                                |
      | category | unclassified |                         | akeneo-mug                     |
    When I check the "Include sub-categories" switch                      # Context\WebUser::iCheckTheSwitch()
    And I select the "2015 collection" tree                               # Pim\Behat\Context\Domain\TreeContext::iSelectTheTree()
    Then I should be able to use the following filters:                   # Context\DataGridContext::iShouldBeAbleToUseTheFollowingFilters()
      | filter   | operator | value                 | result     |
      | category |          | 2015 men's collection | blue-jeans |

@javascript
Feature: Filter products
  In order to filter products in the catalog per completeness
  As a regular user
  I need to be able to filter products in the catalog

  Background:                                  # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_completeness.feature:7
    Given the "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following family:                  # Context\FixturesContext::theFollowingFamilies()
      | code   | attributes                 | requirements-tablet |
      | family | sku,color,description,name | color,name          |
    And the following family variants:         # Context\FixturesContext::theFollowingFamilyVariants()
      | code           | family | variant-axes_1 | variant-attributes_1 |
      | family_variant | family | color          | description          |
    And the following root product models:     # Context\FixturesContext::theFollowingRootProductModels()
      | code               | family_variant | name-en_US |
      | code-product-model | family_variant | name       |
    And the following products:                # Context\FixturesContext::theFollowingProduct()
      | sku      | family | parent             | color |
      | product1 | family | code-product-model | black |
      | product2 | family | code-product-model | red   |
      | product3 | family |                    | black |
    And I am logged in as "Mary"               # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid              # Context\NavigationContext::iAmOnTheGrid()
    And I switch the locale to "en_US"         # Context\WebUser::iSwitchTheLocaleTo()
    And I switch the scope to "tablet"         # Context\WebUser::iSwitchTheScopeTo()

  @critical
  Scenario: Filter incomplete products and product model            # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_completeness.feature:29
    When I filter by "completeness" with operator "" and value "no" # Context\DataGridContext::iFilterBy()
    Then I should see products product3                             # Context\DataGridContext::iShouldSeeEntities()
    And the title of the grid should be "1 product"                 # Context\DataGridContext::theTitleOfTheGridShouldBe()

  @critical
  Scenario: Successfully filter complete products                    # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_completeness.feature:35
    When I filter by "completeness" with operator "" and value "yes" # Context\DataGridContext::iFilterBy()
    Then I should see products code-product-model                    # Context\DataGridContext::iShouldSeeEntities()
    And the title of the grid should be "1 product model"            # Context\DataGridContext::theTitleOfTheGridShouldBe()

@javascript
Feature: Filter products by date field
  In order to filter products by date attributes in the catalog
  As a regular user
  I need to be able to filter products in the catalog

  Background:                                 # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_date_fields.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:             # Context\FixturesContext::theFollowingAttributes()
      | label-en_US | code    | type             | localizable | scopable | useable_as_grid_filter | group |
      | release     | release | pim_catalog_date | 0           | 0        | 1                      | other |
    And the following families:               # Context\FixturesContext::theFollowingFamilies()
      | code     | label-en_US | attributes  |
      | a_family | Family      | sku,release |
    And I am logged in as "Mary"              # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter products by date attributes with user timezone America/New_York # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_date_fields.feature:32
    Given the postit product created at "2018-10-03 01:30:00"                                   # Context\FixturesContext::theProductCreatedAt()
    And the mug product created at "2018-10-03 05:30:00"                                        # Context\FixturesContext::theProductCreatedAt()
    And the pen product created at "2018-10-02 23:30:00"                                        # Context\FixturesContext::theProductCreatedAt()
    When I am logged in as "Julia"                                                              # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                                                               # Context\NavigationContext::iAmOnTheGrid()
    Then the grid should contain 3 elements                                                     # Context\DataGridContext::theGridShouldContainElement()
    And I should see products postit, mug and pen                                               # Context\DataGridContext::iShouldSeeEntities()
    And I should be able to use the following filters:                                          # Context\DataGridContext::iShouldBeAbleToUseTheFollowingFilters()
      | filter  | operator    | value                     | result         |
      | created | more than   | 10/02/2018                | mug            |
      | created | less than   | 10/03/2018                | postit and pen |
      | created | between     | 10/02/2018 and 10/02/2018 | postit and pen |
      | created | not between | 10/02/2018 and 10/02/2018 | mug            |

@javascript
Feature: Filter products
  In order to filter products in the catalog
  As a regular user
  I need to be able to filter products in the catalog

  Background:                                 # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_group.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following group type:             # Context\FixturesContext::theFollowingGroupTypes()
      | code    | label-en_US |
      | related | Related     |
    And the following product groups:         # Context\FixturesContext::theFollowingProductGroups()
      | code   | label-en_US | type    |
      | POSTIT | Postit      | X_SELL  |
      | EMPTY  | Empty       | X_SELL  |
      | MUG    | Mug         | related |
    And the following products:               # Context\FixturesContext::theFollowingProduct()
      | sku    | groups   |
      | BOOK   |          |
      | MUG-1  | MUG      |
      | MUG-2  | MUG      |
      | POSTIT | POSTIT  |
    And I am logged in as "Mary"              # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter by group                       # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_group.feature:26
    Given I am on the products grid                            # Context\NavigationContext::iAmOnTheGrid()
    When I filter by "groups" with operator "" and value "Mug" # Context\DataGridContext::iFilterBy()
    Then the grid should contain 2 elements                    # Context\DataGridContext::theGridShouldContainElement()
    And I should see products MUG-1 and MUG-2                  # Context\DataGridContext::iShouldSeeEntities()
    And I should not see products BOOK and POSTIT              # Context\DataGridContext::iShouldNotSeeEntities()

@javascript
Feature: Filter products by label or identifier field
  In order to ease the search of products in the products grid
  As a regular user
  I need to be able to filter products in the catalog

  Background:                                 # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_label_or_identifier.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"             # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter products on their label identifier or uuid # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_label_or_identifier.feature:12
    Given I add the "english" locale to the "mobile" channel               # Context\FixturesContext::iAddTheLocaleToTheChannel()
    And the following attributes:                                          # Context\FixturesContext::theFollowingAttributes()
      | label-en_US | type             | localizable | scopable | useable_as_grid_filter | group | code |
      | name        | pim_catalog_text | 1           | 1        | 1                      | other | name |
      | ean         | pim_catalog_text | 0           | 1        | 1                      | other | ean  |
      | isbn        | pim_catalog_text | 1           | 0        | 1                      | other | isbn |
    And the following families:                                            # Context\FixturesContext::theFollowingFamilies()
      | code   | attribute_as_label | attributes        |
      | office | name               | sku,name,ean      |
      | home   | ean                | sku,name,ean      |
      | book   | isbn               | sku,name,ean,isbn |
    And the following products:                                            # Context\FixturesContext::theFollowingProduct()
      | sku               | uuid                                 | family | name-en_US-ecommerce | ean-ecommerce | isbn-en_US |
      | 125824            | daa86948-db97-48d0-819f-a09a2bc51c7c | office | Post it              | 2525          |            |
      | 6589              | f6af927b-e26d-48a8-a749-e0a2a6bc9ae8 | office | paper                | post          |            |
      | mug               | ebd75aa5-43bb-4908-9dff-5f8eefa4e3a9 | home   | Mug                  | 2412          |            |
      | 50_shades_of_grey | d28accaf-c749-478d-b4ac-fb2cfbbe8085 | book   | 50 shades of grey    | 1212          | 2424       |
    And I am on the products grid                                          # Context\NavigationContext::iAmOnTheGrid()
    Then the grid should contain 4 elements                                # Context\DataGridContext::theGridShouldContainElement()
    And I should see products 125824, 6589, mug and 50_shades_of_grey      # Context\DataGridContext::iShouldSeeEntities()
    And I should be able to use the following filters:                     # Context\DataGridContext::iShouldBeAbleToUseTheFollowingFilters()
      | filter              | operator | value                                | result                         |
      | label_or_identifier | equals   | 125824                               | 125824                         |
      | label_or_identifier | equals   | post                                 | 125824                         |
      | label_or_identifier | equals   | post it                              | 125824                         |
      | label_or_identifier | equals   | paper                                | 6589                           |
      | label_or_identifier | equals   | 2412                                 | mug                            |
      | label_or_identifier | equals   | pape                                 | 6589                           |
      | label_or_identifier | equals   | shade                                | 50_shades_of_grey              |
      | label_or_identifier | equals   | 24                                   | 125824, mug, 50_shades_of_grey |
      | label_or_identifier | equals   | ebd75aa5-43bb-4908-9dff-5f8eefa4e3a9 | mug                            |

@javascript
Feature: Filter products per metric
  In order to filter products in the catalog per metric
  As a regular user
  I need to be able to filter products per metric

  @critical
  Scenario: Successfully filter products by metric # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_metric.feature:8
    Given the "default" catalog configuration      # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:                  # Context\FixturesContext::theFollowingAttributes()
      | code                         | scopable | type               | useable_as_grid_filter | metric_family | default_metric_unit | decimals_allowed | negative_allowed | group |
      | metric_is_empty              | 0        | pim_catalog_metric | 1                      | Weight        | GRAM                | 1                | 0                | other |
      | metric_is_not_empty          | 0        | pim_catalog_metric | 1                      | Weight        | GRAM                | 1                | 0                | other |
      | metric_is_superior           | 0        | pim_catalog_metric | 1                      | Weight        | GRAM                | 1                | 0                | other |
      | metric_is_inferior           | 0        | pim_catalog_metric | 1                      | Weight        | GRAM                | 1                | 0                | other |
      | metric_is_superior_or_equals | 0        | pim_catalog_metric | 1                      | Weight        | GRAM                | 1                | 0                | other |
      | metric_is_inferior_or_equals | 0        | pim_catalog_metric | 1                      | Weight        | GRAM                | 1                | 0                | other |
    And the following family:                      # Context\FixturesContext::theFollowingFamilies()
      | code       | attributes                                                                                                                              |
      | family_foo | sku,metric_is_empty,metric_is_not_empty,metric_is_superior,metric_is_inferior,metric_is_superior_or_equals,metric_is_inferior_or_equals |
    And the following products:                    # Context\FixturesContext::theFollowingProduct()
      | sku                            | family     | metric_is_empty | metric_is_not_empty | metric_is_superior | metric_is_inferior | metric_is_superior_or_equals | metric_is_inferior_or_equals |
      | ok_with_all_filters            | family_foo |                 | 120 GRAM            | 121 GRAM           | 122 GRAM           | 123 GRAM                     | 124 GRAM                     |
      | not_ok_with_empty              | family_foo | 119 GRAM        | 120 GRAM            | 121 GRAM           | 122 GRAM           | 123 GRAM                     | 124 GRAM                     |
      | not_ok_with_not_empty          | family_foo |                 |                     | 121 GRAM           | 122 GRAM           | 123 GRAM                     | 124 GRAM                     |
      | not_ok_with_superior           | family_foo |                 | 120 GRAM            | 120 GRAM           | 122 GRAM           | 123 GRAM                     | 124 GRAM                     |
      | not_ok_with_inferior           | family_foo |                 | 120 GRAM            | 121 GRAM           | 123 GRAM           | 123 GRAM                     | 124 GRAM                     |
      | not_ok_with_superior_or_equals | family_foo |                 | 120 GRAM            | 121 GRAM           | 122 GRAM           | 122 GRAM                     | 124 GRAM                     |
      | not_ok_with_inferior_or_equals | family_foo |                 | 120 GRAM            | 121 GRAM           | 122 GRAM           | 123 GRAM                     | 125 GRAM                     |
      | not_ok_with_empty_as_no_family |            |                 | 120 GRAM            | 121 GRAM           | 122 GRAM           | 123 GRAM                     | 124 GRAM                     |
    And I am logged in as "Mary"                   # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                  # Context\NavigationContext::iAmOnTheGrid()
    Then the grid should contain 8 elements        # Context\DataGridContext::theGridShouldContainElement()
    When I filter with the following filters:      # Context\DataGridContext::iFilterWithTheFollowingFilters()
      | filter                       | operator     | value    |
      | metric_is_empty              | is empty     |          |
      | metric_is_not_empty          | is not empty |          |
      | metric_is_superior           | >            | 120 GRAM |
      | metric_is_inferior           | <            | 123 GRAM |
      | metric_is_superior_or_equals | >=           | 123 GRAM |
      | metric_is_inferior_or_equals | <=           | 124 GRAM |
    Then the grid should contain 1 elements        # Context\DataGridContext::theGridShouldContainElement()
    And I should see products ok_with_all_filters  # Context\DataGridContext::iShouldSeeEntities()

@javascript
Feature: Filter products per option
  In order to enrich my catalog
  As a regular user
  I need to be able to manually filter products per option

  Background:                                                         # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_option_fields.feature:7
    Given the "default" catalog configuration                         # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:                                     # Context\FixturesContext::theFollowingAttributes()
      | label-en_US | type                     | localizable | scopable | useable_as_grid_filter | group | code  |
      | color       | pim_catalog_multiselect  | 0           | 0        | 1                      | other | color |
      | size        | pim_catalog_simpleselect | 0           | 0        | 1                      | other | size  |
    And the following "color" attribute options: Black, White and Red # Context\FixturesContext::theFollowingAttributeOptions()
    And the following "size" attribute options: S, M and L            # Context\FixturesContext::theFollowingAttributeOptions()
    And the following products:                                       # Context\FixturesContext::theFollowingProduct()
      | sku   | color | size |
      | Shirt |       |      |
      | Sweat |       | M    |
      | Shoes | Black |      |
    And I am logged in as "Mary"                                      # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter products by a simple option # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_option_fields.feature:23
    Given I am on the products grid                         # Context\NavigationContext::iAmOnTheGrid()
    And the grid should contain 3 elements                  # Context\DataGridContext::theGridShouldContainElement()
    Then I should be able to use the following filters:     # Context\DataGridContext::iShouldBeAbleToUseTheFollowingFilters()
      | filter | operator     | value | result |
      | size   | in list      | M     | Sweat  |
      | size   | is empty     |       |        |
      | size   | is not empty |       | Sweat  |

  @critical
  Scenario: Successfully filter products by a multi option # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_option_fields.feature:33
    Given I am on the products grid                        # Context\NavigationContext::iAmOnTheGrid()
    And the grid should contain 3 elements                 # Context\DataGridContext::theGridShouldContainElement()
    Then I should be able to use the following filters:    # Context\DataGridContext::iShouldBeAbleToUseTheFollowingFilters()
      | filter | operator     | value | result |
      | color  | in list      | Black | Shoes  |
      | color  | is empty     |       |        |
      | color  | is not empty |       | Shoes  |

@javascript
Feature: Filter products per price
  In order to filter products in the catalog per price
  As a regular user
  I need to be able to filter products per price

  @critical
  Scenario: Successfully filter products by price # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_price.feature:8
    Given the "default" catalog configuration     # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:                 # Context\FixturesContext::theFollowingAttributes()
      | code                        | scopable | type                         | useable_as_grid_filter | decimals_allowed | group |
      | price_is_empty              | 0        | pim_catalog_price_collection | 1                      | 1                | other |
      | price_is_not_empty          | 0        | pim_catalog_price_collection | 1                      | 1                | other |
      | price_is_superior           | 0        | pim_catalog_price_collection | 1                      | 1                | other |
      | price_is_inferior           | 0        | pim_catalog_price_collection | 1                      | 1                | other |
      | price_is_superior_or_equals | 0        | pim_catalog_price_collection | 1                      | 1                | other |
      | price_is_inferior_or_equals | 0        | pim_catalog_price_collection | 1                      | 1                | other |
    And the following family:                     # Context\FixturesContext::theFollowingFamilies()
      | code       | attributes                                                                                                                        |
      | family_foo | sku,price_is_empty,price_is_not_empty,price_is_superior,price_is_inferior,price_is_superior_or_equals,price_is_inferior_or_equals |
    And the following products:                   # Context\FixturesContext::theFollowingProduct()
      | sku                            | family     | price_is_empty | price_is_not_empty | price_is_superior | price_is_inferior | price_is_superior_or_equals | price_is_inferior_or_equals |
      | ok_with_all_filters            | family_foo |                | 23.5 EUR           | 24.5 EUR          | 25.5 EUR          | 25.5 EUR                    | 26.5 EUR                    |
      | not_ok_with_empty              | family_foo | 10 EUR         | 23.5 EUR           | 24.5 EUR          | 25.5 EUR          | 25.5 EUR                    | 26.5 EUR                    |
      | not_ok_with_not_empty          | family_foo |                |                    | 24.5 EUR          | 25.5 EUR          | 25.5 EUR                    | 26.5 EUR                    |
      | not_ok_with_superior           | family_foo |                | 23.5 EUR           | 23.5 EUR          | 25.5 EUR          | 25.5 EUR                    | 26.5 EUR                    |
      | not_ok_with_inferior           | family_foo |                | 23.5 EUR           | 24.5 EUR          | 26.5 EUR          | 25.5 EUR                    | 26.5 EUR                    |
      | not_ok_with_superior_or_equals | family_foo |                | 23.5 EUR           | 24.5 EUR          | 26.5 EUR          | 24.5 EUR                    | 26.5 EUR                    |
      | not_ok_with_inferior_or_equals | family_foo |                | 23.5 EUR           | 24.5 EUR          | 25.5 EUR          | 25.5 EUR                    | 27.5 EUR                    |
      | not_ok_with_empty_as_no_family |            |                | 23.5 EUR           | 24.5 EUR          | 25.5 EUR          | 25.5 EUR                    | 26.5 EUR                    |
    And I am logged in as "Mary"                  # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                 # Context\NavigationContext::iAmOnTheGrid()
    Then the grid should contain 8 elements       # Context\DataGridContext::theGridShouldContainElement()
    When I filter with the following filters:     # Context\DataGridContext::iFilterWithTheFollowingFilters()
      | filter                      | operator     | value    |
      | price_is_empty              | is empty     |          |
      | price_is_not_empty          | is not empty |          |
      | price_is_superior           | >            | 23.5 EUR |
      | price_is_inferior           | <            | 26.5 EUR |
      | price_is_superior_or_equals | >=           | 25.5 EUR |
      | price_is_inferior_or_equals | <=           | 26.5 EUR |
    Then the grid should contain 1 elements       # Context\DataGridContext::theGridShouldContainElement()
    And I should see products ok_with_all_filters # Context\DataGridContext::iShouldSeeEntities()

@javascript
Feature: Filter products by text field
  In order to filter products by text attributes in the catalog
  As a regular user
  I need to be able to filter products in the catalog

  Background:                                 # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_text_fields.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Mary"              # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter products with special characters value for text attribute # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_text_fields.feature:12
    Given the following attribute:                                                        # Context\FixturesContext::theFollowingAttributes()
      | code                  | type             | useable_as_grid_filter | localizable | scopable | group |
      | text_contains         | pim_catalog_text | 1                      | 1           | 1        | other |
      | text_starts_with      | pim_catalog_text | 1                      | 0           | 0        | other |
      | text_does_not_contain | pim_catalog_text | 1                      | 0           | 0        | other |
      | text_equals           | pim_catalog_text | 1                      | 0           | 0        | other |
      | text_empty            | pim_catalog_text | 1                      | 0           | 0        | other |
      | text_is_not_empty     | pim_catalog_text | 1                      | 0           | 0        | other |
    And the following family:                                                             # Context\FixturesContext::theFollowingFamilies()
      | code       | attributes                                                                                        |
      | family_foo | sku,text_contains,text_starts_with,text_does_not_contain,text_equals,text_empty,text_is_not_empty |
    And the following products:                                                           # Context\FixturesContext::theFollowingProduct()
      | sku                            | family     | text_contains-en_US-ecommerce | text_starts_with     | text_does_not_contain | text_equals | text_empty | text_is_not_empty |
      | ok_with_all_filters            | family_foo | HP LA2206xc + WF722A          | HP LA2206xc + WF722A | foo                   | bar         |            | not_empty         |
      | not_ok_with_contains           | family_foo | HP LA2206xc + WF666A          | HP LA2206xc + WF722A | foo                   | bar         |            | not_empty         |
      | not_ok_with_starts_with        | family_foo | HP LA2206xc + WF722A          | YY LA2206xc + HP     | foo                   | bar         |            | not_empty         |
      | not_ok_with_does_not_contain   | family_foo | HP LA2206xc + WF722A          | HP LA2206xc + WF722A | baz                   | bar         |            | not_empty         |
      | not_ok_with_equals             | family_foo | HP LA2206xc + WF722A          | HP LA2206xc + WF722A | foo                   | zoo         |            | not_empty         |
      | not_ok_with_empty              | family_foo | HP LA2206xc + WF722A          | HP LA2206xc + WF722A | foo                   | bar         | foo        | not_empty         |
      | not_ok_with_not_empty          | family_foo | HP LA2206xc + WF722A          | HP LA2206xc + WF722A | foo                   | bar         |            |                   |
      | not_ok_with_empty_as_no_family |            | HP LA2206xc + WF722A          | HP LA2206xc + WF722A | foo                   | bar         |            | not_empty         |
    And I am on the products grid                                                         # Context\NavigationContext::iAmOnTheGrid()
    Then the grid should contain 8 elements                                               # Context\DataGridContext::theGridShouldContainElement()
    When I filter with the following filters:                                             # Context\DataGridContext::iFilterWithTheFollowingFilters()
      | filter                | operator         | value             |
      | text_empty            | is empty         |                   |
      | text_is_not_empty     | is not empty     |                   |
      | text_contains         | contains         | LA2206xc + WF722A |
      | text_does_not_contain | does not contain | ba                |
      | text_equals           | is equal to      | bar               |
      | text_starts_with      | starts with      | HP                |
    Then the grid should contain 1 elements                                               # Context\DataGridContext::theGridShouldContainElement()
    And I should see products ok_with_all_filters                                         # Context\DataGridContext::iShouldSeeEntities()

@javascript
Feature: Filter products by boolean field
  In order to filter products by boolean attributes in the catalog
  As a regular user
  I need to be able to filter products in the catalog

  Background:                                 # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_product_per_boolean.feature:7
    Given the "apparel" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Mary"              # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully filter products by boolean value for boolean attributes # tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_product_per_boolean.feature:13
    Given the following products:                                                # Context\FixturesContext::theFollowingProduct()
      | sku   |
      | pants |
      | shirt |
      | shoes |
      | hat   |
      | socks |
    And an enabled "pants" product                                               # Context\FixturesContext::anEnabledOrDisabledProduct()
    And an enabled "shirt" product                                               # Context\FixturesContext::anEnabledOrDisabledProduct()
    And an enabled "hat" product                                                 # Context\FixturesContext::anEnabledOrDisabledProduct()
    And a disabled "shoes" product                                               # Context\FixturesContext::anEnabledOrDisabledProduct()
    And a disabled "socks" product                                               # Context\FixturesContext::anEnabledOrDisabledProduct()
    And I am on the products grid                                                # Context\NavigationContext::iAmOnTheGrid()
    Then the grid should contain 5 elements                                      # Context\DataGridContext::theGridShouldContainElement()
    And I should see products pants, shirt, shoes, hat and socks                 # Context\DataGridContext::iShouldSeeEntities()
    And I should be able to use the following filters:                           # Context\DataGridContext::iShouldBeAbleToUseTheFollowingFilters()
      | filter  | operator | value    | result               |
      | enabled |          | Enabled  | pants, shirt and hat |
      | enabled |          | Disabled | shoes and socks      |

Feature: Import products coming from an external application
  In order to enrich existing product information
  As an administrator
  I need to be able to import products regularly

  Background:                                  # tests/legacy/features/pim/enrichment/product/import/import_products.feature:6
    Given the "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following product groups:          # Context\FixturesContext::theFollowingProductGroups()
      | code  | label-en_US | type    |
      | CROSS | Bag Cross   | RELATED |

  @critical @validate-migration @purge-messenger
  Scenario: Successfully import a csv file of products                                                                                     # tests/legacy/features/pim/enrichment/product/import/import_products.feature:13
    Given the following CSV file to import:                                                                                                # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      sku;family;groups;categories;name-en_US;description-en_US-tablet
      SKU-001;boots;CROSS;winter_boots;Donec;dictum magna. Ut tincidunt orci quis lectus. Nullam suscipit, est
      SKU-002;sneakers;;winter_boots;Donex;Pellentesque habitant morbi tristique senectus et netus et malesuada fames
      SKU-003;sneakers;;sandals;ac;Morbi quis urna. Nunc quis arcu vel quam dignissim pharetra.
      SKU-004;sneakers;;sandals;nec;justo sit amet nulla. Donec non justo. Proin non massa
      SKU-005;boots;CROSS;winter_boots,sandals;non;tincidunt dui augue eu tellus. Phasellus elit pede, malesuada vel
      SKU-006;boots;CROSS;winter_boots;ipsum;Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam auctor,
      SKU-007;sneakers;;;rutrum.;quis, pede. Praesent eu dui. Cum sociis natoque penatibus et
      SKU-008;boots;CROSS;winter_boots;ligula;urna et arcu imperdiet ullamcorper. Duis at lacus. Quisque purus
      SKU-009;sneakers;;;porttitor;sagittis. Duis gravida. Praesent eu nulla at sem molestie sodales.
      SKU-010;boots;CROSS;sandals;non,;vestibulum nec, euismod in, dolor. Fusce feugiat. Lorem ipsum dolor
      """
    When the products are imported via the job csv_footwear_product_import                                                                 # Pim\Behat\Context\ImportExportFileContext::entitiesAreImportedViaTheJob()
    Then there should be 10 products                                                                                                       # Context\FixturesContext::thereShouldBeProducts()
    And the family of the product "SKU-006" should be "boots"                                                                              # Context\WebUser::theFamilyOfProductShouldBe()
    And product "SKU-007" should be enabled                                                                                                # Context\WebUser::productShouldBeEnabled()
    And the english localizable value name of "SKU-001" should be "Donec"                                                                  # Context\FixturesContext::theLocalizableValueOfShouldBe()
    And the english tablet description of "SKU-002" should be "Pellentesque habitant morbi tristique senectus et netus et malesuada fames" # Context\FixturesContext::theScopableAndLocalizableOfShouldBe()
    And 10 events of type "product.created" should have been raised                                                                        # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

@javascript
Feature: Quick export many products from datagrid
  In order to quick export a set of products
  As a product manager
  I need to be able to display products I want and export them

  Background:                                   # tests/legacy/features/pim/enrichment/product/mass-action/quick-export/quick_export.feature:7
    Given a "footwear" catalog configuration    # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"               # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "boots" family page         # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I visit the "Attributes" tab            # Context\WebUser::iVisitTheTab()
    And I add available attribute Attribute 123 # Context\WebUser::iAddAvailableAttributes()
    And I save the family                       # Context\WebUser::iSave()
    And I am on the "sneakers" family page      # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I visit the "Attributes" tab            # Context\WebUser::iVisitTheTab()
    And I add available attribute Attribute 123 # Context\WebUser::iAddAvailableAttributes()
    And I save the family                       # Context\WebUser::iSave()
    And I am on the "sandals" family page       # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I visit the "Attributes" tab            # Context\WebUser::iVisitTheTab()
    And I add available attribute Attribute 123 # Context\WebUser::iAddAvailableAttributes()
    And I save the family                       # Context\WebUser::iSave()
    And the following products:                 # Context\FixturesContext::theFollowingProduct()
      | uuid                                 | sku      | family   | categories        | name-en_US    | price          | size | color | 123 |
      | 1db6c838-3df1-4112-bad4-ee2e3335a942 | boots    | boots    | winter_collection | Amazing boots | 20 EUR, 25 USD | 40   | black | aaa |
      | 1c8156c8-5988-4684-9aba-b99c130d1bc6 | sneakers | sneakers | summer_collection | Sneakers      | 50 EUR, 60 USD | 42   | white | bbb |
      | 3b2952f9-d407-4d5c-90df-1c926ee5e4f5 | sandals  | sandals  | summer_collection | Sandals       | 5 EUR, 5 USD   | 40   | red   | ccc |
      | e3441c81-1c45-4b10-8181-ec3a995e4c90 | pump     |          | summer_collection | Pump          | 15 EUR, 20 USD | 41   | blue  | ddd |

  @critical
  Scenario: Successfully quick export selected products as a XLSX file                                                 # tests/legacy/features/pim/enrichment/product/mass-action/quick-export/quick_export.feature:59
    Given I am on the products grid                                                                                    # Context\NavigationContext::iAmOnTheGrid()
    When I select rows boots, sneakers                                                                                 # Context\DataGridContext::iSelectRows()
    And I press the "Quick Export" button                                                                              # Context\WebUser::iPressTheButton()
    And I press the "XLSX" button                                                                                      # Context\WebUser::iPressTheButton()
    And I press the "All attributes" button                                                                            # Context\WebUser::iPressTheButton()
    And I press the "With codes" button                                                                                # Context\WebUser::iPressTheButton()
    And I press the "With media" button                                                                                # Context\WebUser::iPressTheButton()
    And I press the "With UUID" button                                                                                 # Context\WebUser::iPressTheButton()
    And I press the "Export" button                                                                                    # Context\WebUser::iPressTheButton()
    And I wait for the "xlsx_product_quick_export" quick export to finish                                              # Context\WebUser::iWaitForTheQuickExportToFinish()
    And I am on the dashboard page                                                                                     # Context\NavigationContext::iAmOnThePage()
    Then I should have 1 new notification                                                                              # Context\AssertionContext::iShouldHaveNewNotification()
    And I should see notification:                                                                                     # Context\AssertionContext::iShouldSeeNotifications()
      | type    | message                                                      |
      | success | Quick Export Quick export XLSX product quick export finished |
    When I go on the last executed job resume of "xlsx_product_quick_export"                                           # Context\NavigationContext::iGoOnTheLastExecutedJobResume()
    Then I should see the text "COMPLETED"                                                                             # Context\AssertionContext::assertPageContainsText()
    And the names of the exported files of "xlsx_product_quick_export" should be "1_products_export_en_US_tablet.xlsx" # Pim\Behat\Context\Domain\Spread\ExportProfilesContext::theNamesOfTheExportedFilesOfShouldBe()
    And exported xlsx file 1 of "xlsx_product_quick_export" should contain:                                            # Pim\Behat\Context\Domain\Spread\XlsxFileContext::exportedXlsxFileOfShouldContain()
      | uuid                                 | sku      | 123 | categories        | color | description-en_US-tablet | enabled | family   | groups | lace_color | manufacturer | name-en_US    | price-EUR | price-USD | rating | side_view | size | top_view | weather_conditions |
      | 1db6c838-3df1-4112-bad4-ee2e3335a942 | boots    | aaa | winter_collection | black |                          | 1       | boots    |        |            |              | Amazing boots | 20        | 25        |        |           | 40   |          |                    |
      | 1c8156c8-5988-4684-9aba-b99c130d1bc6 | sneakers | bbb | summer_collection | white |                          | 1       | sneakers |        |            |              | Sneakers      | 50        | 60        |        |           | 42   |          |                    |

@javascript
Feature: Classify many products and product models at once
  In order to easily classify products and product models
  As a product manager
  I need to associate many products to categories at once with a form

  Background:                                          # tests/legacy/features/pim/enrichment/product/mass-edit/classify_product_model.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                      # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                      # Context\NavigationContext::iAmOnTheGrid()

  @critical @purge-messenger
  Scenario: Add several products and product models to categories at once                                                                # tests/legacy/features/pim/enrichment/product/mass-edit/classify_product_model.feature:13
    When I sort by "ID" value ascending                                                                                                  # Context\DataGridContext::iSortByValue()
    Given I select rows aphrodite, 1111111171 and amor                                                                                   # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                                                                                # Context\WebUser::iPressTheButton()
    And I choose the "Add to categories" operation                                                                                       # Context\WebUser::iChooseTheOperation()
    And I move on to the choose step                                                                                                     # Context\WebUser::iMoveOnToTheChooseStep()
    And I choose the "Add to categories" operation                                                                                       # Context\WebUser::iChooseTheOperation()
    And I visit the "Master" tab                                                                                                         # Context\WebUser::iVisitTheTab()
    And I expand the "Master" category                                                                                                   # Pim\Behat\Context\Domain\TreeContext::iExpandTheNode()
    And I click on the "Men" category                                                                                                    # Pim\Behat\Context\Domain\TreeContext::iClickOnTheNode()
    When I confirm mass edit                                                                                                             # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "add_to_category" job to finish                                                                                   # Context\WebUser::iWaitForTheJobToFinish()
    Then the categories of the product model "aphrodite" should be "master_men, master_women_blouses, print_clothing and supplier_zaro"  # Context\FixturesContext::theCategoriesOfTheProductModelShouldBe()
    Then the categories of the product "1111111114" should be "master_men, master_women_blouses, print_clothing and supplier_zaro"       # Context\FixturesContext::theCategoriesOfTheProductShouldBe()
    Then the categories of the product "1111111171" should be "master_accessories_bags, master_men, print_accessories and supplier_zaro" # Context\FixturesContext::theCategoriesOfTheProductShouldBe()
    Then the categories of the product model "amor" should be "master_men, master_men_blazers and supplier_zaro"                         # Context\FixturesContext::theCategoriesOfTheProductModelShouldBe()
    And 1 event of type "product.updated" should have been raised                                                                        # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()
    And 2 events of type "product_model.updated" should have been raised                                                                 # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

@javascript
Feature: Edit common attributes of many products at once
  In order to update many products with the same information
  As a product manager
  I need to be able to edit common attributes of many products at once

  Background:                                # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:            # Context\FixturesContext::theFollowingAttributes()
      | code        | label-en_US | type               | metric_family | default_metric_unit | group | decimals_allowed | negative_allowed |
      | weight      | Weight      | pim_catalog_metric | Weight        | GRAM                | other | 0                | 0                |
      | heel_height | Heel Height | pim_catalog_metric | Length        | CENTIMETER          | other | 0                | 0                |
    And the following family:                # Context\FixturesContext::theFollowingFamilies()
      | code       | attributes                                                                                                        |
      | high_heels | sku,name,description,price,rating,size,color,manufacturer,heel_height                                             |
      | boots      | sku,name,manufacturer,description,weather_conditions,price,rating,side_view,top_view,size,color,lace_color,weight |
      | sneakers   | sku,name,manufacturer,description,weather_conditions,price,rating,side_view,top_view,size,color,lace_color,weight |
      | sandals    | sku,name,manufacturer,description,price,rating,side_view,size,color,weight,heel_height                            |
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku            | family     | color | heel_height   | groups |
      | boots          | boots      |       |               |        |
      | sneakers       | sneakers   |       |               |        |
      | sandals        | sandals    |       |               |        |
      | pump           |            |       |               |        |
      | highheels      | high_heels | red   | 12 CENTIMETER |        |
      | blue_highheels | high_heels | blue  | 12 CENTIMETER |        |
    And I am logged in as "Julia"            # Context\NavigationContext::iAmLoggedInAs()

  @critical @purge-messenger
  Scenario: Successfully update many text values at once                   # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes.feature:42
    Given I am on the products grid                                        # Context\NavigationContext::iAmOnTheGrid()
    And I select rows boots, sandals and sneakers                          # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                  # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                     # Context\WebUser::iChooseTheOperation()
    And I display the Name attribute                                       # Context\WebUser::iDisplayTheAttributes()
    And I change the "Name" to "boots"                                     # Context\WebUser::iChangeTheTo()
    Then I should see a remove link next to the "Name" field               # Context\WebUser::iShouldSeeARemoveLinkNextToTheField()
    And I confirm mass edit                                                # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish              # Context\WebUser::iWaitForTheJobToFinish()
    Then the english localizable value name of "boots" should be "boots"   # Context\FixturesContext::theLocalizableValueOfShouldBe()
    And the english localizable value name of "sandals" should be "boots"  # Context\FixturesContext::theLocalizableValueOfShouldBe()
    And the english localizable value name of "sneakers" should be "boots" # Context\FixturesContext::theLocalizableValueOfShouldBe()
    And 3 events of type "product.updated" should have been raised         # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Successfully update many multi-valued values at once                    # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes.feature:58
    Given I am on the products grid                                                 # Context\NavigationContext::iAmOnTheGrid()
    And I select rows boots and sneakers                                            # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                           # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                              # Context\WebUser::iChooseTheOperation()
    And I display the Weather conditions attribute                                  # Context\WebUser::iDisplayTheAttributes()
    And I change the "Weather conditions" to "Dry, Hot"                             # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                                         # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                       # Context\WebUser::iWaitForTheJobToFinish()
    Then the options "weather_conditions" of products boots and sneakers should be: # Context\FixturesContext::theOptionsOfProductsShouldBe()
      | value |
      | dry   |
      | hot   |

@javascript
Feature: Edit common attributes of many products at once
  In order to update many products with the same information
  As a product manager
  I need to be able to edit common attributes of many products at once

  Background:                                # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_images.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:            # Context\FixturesContext::theFollowingAttributes()
      | code         | label-en_US | type               | metric_family | default_metric_unit | group | decimals_allowed | negative_allowed |
      | weight       | Weight      | pim_catalog_metric | Weight        | GRAM                | other | 0                | 0                |
      | heel_height  | Heel Height | pim_catalog_metric | Length        | CENTIMETER          | other | 0                | 0                |
      | buckle_color | Buckle      | pim_catalog_text   |               |                     | other |                  |                  |
    And the following family:                # Context\FixturesContext::theFollowingFamilies()
      | code       | attributes                                                                                                        |
      | high_heels | sku,name,description,price,rating,size,color,manufacturer,heel_height,buckle_color                                |
      | boots      | sku,name,manufacturer,description,weather_conditions,price,rating,side_view,top_view,size,color,lace_color,weight |
      | sneakers   | sku,name,manufacturer,description,weather_conditions,price,rating,side_view,top_view,size,color,lace_color,weight |
      | sandals    | sku,name,manufacturer,description,price,rating,side_view,size,color,weight,heel_height                            |
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku            | family     | color | heel_height   | groups |
      | boots          | boots      |       |               |        |
      | sneakers       | sneakers   |       |               |        |
      | sandals        | sandals    |       |               |        |
      | pump           |            |       |               |        |
      | highheels      | high_heels | red   | 12 CENTIMETER |        |
      | blue_highheels | high_heels | blue  | 12 CENTIMETER |        |
    And I am logged in as "Julia"            # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid            # Context\NavigationContext::iAmOnTheGrid()

  @critical
  Scenario: Successfully update many images values at once                              # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_images.feature:32
    Given I select rows sandals and sneakers                                            # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                               # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                  # Context\WebUser::iChooseTheOperation()
    And I display the Side view attribute                                               # Context\WebUser::iDisplayTheAttributes()
    And I attach file "SNKRS-1R.png" to "Side view"                                     # Pim\Behat\Context\JobContext::attachFileToField()
    And I confirm mass edit                                                             # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                           # Context\WebUser::iWaitForTheJobToFinish()
    Then the file "side_view" of products sandals and sneakers should be "SNKRS-1R.png" # Context\FixturesContext::theFileOfShouldBe()

@javascript
Feature: Edit common attributes of many products at once
  In order to update many products with the same information
  As a product manager
  I need to be able to edit common attributes of many products at once

  Background:                                # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_metric.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:            # Context\FixturesContext::theFollowingAttributes()
      | code         | label-en_US | type               | metric_family | default_metric_unit | group | decimals_allowed | negative_allowed |
      | weight       | Weight      | pim_catalog_metric | Weight        | GRAM                | other | 0                | 0                |
      | heel_height  | Heel Height | pim_catalog_metric | Length        | CENTIMETER          | other | 0                | 0                |
      | buckle_color | Buckle      | pim_catalog_text   |               |                     | other |                  |                  |
    And the following family:                # Context\FixturesContext::theFollowingFamilies()
      | code       | attributes                                                                                                        |
      | high_heels | sku,name,description,price,rating,size,color,manufacturer,heel_height,buckle_color                                |
      | boots      | sku,name,manufacturer,description,weather_conditions,price,rating,side_view,top_view,size,color,lace_color,weight |
      | sneakers   | sku,name,manufacturer,description,weather_conditions,price,rating,side_view,top_view,size,color,lace_color,weight |
      | sandals    | sku,name,manufacturer,description,price,rating,side_view,size,color,weight,heel_height                            |
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku            | family     | color | heel_height   | groups |
      | boots          | boots      |       |               |        |
      | sneakers       | sneakers   |       |               |        |
      | sandals        | sandals    |       |               |        |
      | pump           |            |       |               |        |
      | highheels      | high_heels | red   | 12 CENTIMETER |        |
      | blue_highheels | high_heels | blue  | 12 CENTIMETER |        |
    And I am logged in as "Julia"            # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid            # Context\NavigationContext::iAmOnTheGrid()

  @critical
  Scenario: Successfully update many metric values at once                 # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_metric.feature:32
    Given I select rows boots and sandals                                  # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                  # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                     # Context\WebUser::iChooseTheOperation()
    And I display the Weight attribute                                     # Context\WebUser::iDisplayTheAttributes()
    And I change the "Weight" to "600"                                     # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                                # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish              # Context\WebUser::iWaitForTheJobToFinish()
    Then the metric "Weight" of products boots and sandals should be "600" # Context\FixturesContext::theMetricOfProductsShouldBe()

@javascript
Feature: Edit common attributes of many products and product models at once
  In order to update many products with the same information
  As a product manager
  I need to be able to edit attributes of many products and product models at once

  Background:                                                         # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:7
    Given the "default" catalog configuration                         # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:                                     # Context\FixturesContext::theFollowingAttributes()
      | code        | label-en_US | type                     | unique | group | decimals_allowed | negative_allowed | metric_family | default_metric_unit | useable_as_grid_filter |
      | color       | Color       | pim_catalog_simpleselect | 0      | other |                  |                  |               |                     | 1                      |
      | size        | Size        | pim_catalog_simpleselect | 0      | other |                  |                  |               |                     | 1                      |
      | brand       | Brand       | pim_catalog_simpleselect | 0      | other |                  |                  |               |                     | 0                      |
      | composition | Composition | pim_catalog_text         | 0      | other |                  |                  |               |                     | 0                      |
      | weight      | Weight      | pim_catalog_metric       | 0      | other | 0                | 0                | Weight        | GRAM                | 0                      |
    And the following "Brand" attribute options: Abibas, Nyke, Ribouk # Context\FixturesContext::theFollowingAttributeOptions()
    And the following "Size" attribute options: s, m, l               # Context\FixturesContext::theFollowingAttributeOptions()
    And the following "color" attribute options: white, black         # Context\FixturesContext::theFollowingAttributeOptions()
    And the following family:                                         # Context\FixturesContext::theFollowingFamilies()
      | code     | label-en_US | attributes                              |
      | clothing | Clothing    | sku,color,size,brand,composition,weight |
    And the following family variants:                                # Context\FixturesContext::theFollowingFamilyVariants()
      | code                | family   | label-en_US                | variant-axes_1 | variant-axes_2 | variant-attributes_1   | variant-attributes_2 |
      | clothing_color_size | clothing | Clothing by color and size | color          | size           | color,composition      | size,sku,weight      |
      | clothing_size       | clothing | Clothing by color/size     | color,size     |                | color,size,composition |                      |
    And the following root product models:                            # Context\FixturesContext::theFollowingRootProductModels()
      | code      | family_variant      | brand  |
      | model-col | clothing_color_size | Abibas |
      | model-nin | clothing_size       |        |
    And the following sub product models:                             # Context\FixturesContext::theFollowingSubProductModels()
      | code            | parent    | family_variant      | color | composition             |
      | model-col-white | model-col | clothing_color_size | white | cotton 90%, viscose 10% |
    And the following products:                                       # Context\FixturesContext::theFollowingProduct()
      | sku         | family   | parent          | color | size | brand  | composition | weight   |
      | col-white-m | clothing | model-col-white |       | m    |        |             | 478 GRAM |
      | nin-s       | clothing | model-nin       | black | s    |        | 100% wool   |          |
      | tool-tee    | clothing |                 | black | m    | Ribouk |             |          |
    And I am logged in as "Julia"                                     # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Mass edit attributes of a product model inside a family variant with 2 levels of hierarchy # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:41
    Given I am on the products grid                                                                    # Context\NavigationContext::iAmOnTheGrid()
    And I select rows model-col                                                                        # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                                              # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                                 # Context\WebUser::iChooseTheOperation()
    And I display the Brand attribute                                                                  # Context\WebUser::iDisplayTheAttributes()
    And I change the "Brand" to "Nyke"                                                                 # Context\WebUser::iChangeTheTo()
    And I display the Composition attribute                                                            # Context\WebUser::iDisplayTheAttributes()
    And I change the "Composition" to "100% cotton"                                                    # Context\WebUser::iChangeTheTo()
    And I display the Weight attribute                                                                 # Context\WebUser::iDisplayTheAttributes()
    And I change the "Weight" to "500 Gram"                                                            # Context\WebUser::iChangeTheTo()
    When I confirm mass edit                                                                           # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                                          # Context\WebUser::iWaitForTheJobToFinish()
    Then the product model value brand of "model-col" should be "Nyke"                                 # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product model value brand of "model-col-white" should be "Nyke"                            # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product model value composition of "model-col-white" should be "100% cotton"               # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product value brand of "col-white-m" should be "Nyke"                                      # Context\FixturesContext::theOfShouldBe()
    And the product "col-white-m" should have the following values:                                    # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | composition | 100% cotton   |
      | weight      | 500.0000 GRAM |
    When I go on the last executed job resume of "edit_common_attributes"                              # Context\NavigationContext::iGoOnTheLastExecutedJobResume()
    Then I should see the text "COMPLETED"                                                             # Context\AssertionContext::assertPageContainsText()
    And I should see the text "read 3"                                                                 # Context\AssertionContext::assertPageContainsText()
    And I should see the text "updated 3"                                                              # Context\AssertionContext::assertPageContainsText()

  @critical
  Scenario: Mass edit attributes of a sub product model inside a family variant with 2 levels of hierarchy # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:67
    Given I am on the products grid                                                                        # Context\NavigationContext::iAmOnTheGrid()
    And I show the filter "color"                                                                          # Context\DataGridContext::iShowTheFilter()
    And I filter by "color" with operator "IN LIST" and value "white"                                      # Context\DataGridContext::iFilterBy()
    And I select rows model-col-white                                                                      # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                                                  # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                                     # Context\WebUser::iChooseTheOperation()
    And I display the Composition attribute                                                                # Context\WebUser::iDisplayTheAttributes()
    And I change the "Composition" to "100% cotton"                                                        # Context\WebUser::iChangeTheTo()
    And I display the Weight attribute                                                                     # Context\WebUser::iDisplayTheAttributes()
    And I change the "Weight" to "500 Gram"                                                                # Context\WebUser::iChangeTheTo()
    When I confirm mass edit                                                                               # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                                              # Context\WebUser::iWaitForTheJobToFinish()
    Then the product model value composition of "model-col-white" should be "100% cotton"                  # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product "col-white-m" should have the following values:                                        # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | composition | 100% cotton   |
      | weight      | 500.0000 GRAM |
    When I go on the last executed job resume of "edit_common_attributes"                                  # Context\NavigationContext::iGoOnTheLastExecutedJobResume()
    Then I should see the text "COMPLETED"                                                                 # Context\AssertionContext::assertPageContainsText()
    And I should see the text "read 2"                                                                     # Context\AssertionContext::assertPageContainsText()
    And I should see the text "updated 2"                                                                  # Context\AssertionContext::assertPageContainsText()

  @critical
  Scenario: Mass edit attributes of a product model inside a family variant with 1 levels of hierarchy # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:90
    Given I am on the products grid                                                                    # Context\NavigationContext::iAmOnTheGrid()
    And I select rows model-nin                                                                        # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                                              # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                                 # Context\WebUser::iChooseTheOperation()
    And I display the Brand attribute                                                                  # Context\WebUser::iDisplayTheAttributes()
    And I change the "Brand" to "Nyke"                                                                 # Context\WebUser::iChangeTheTo()
    And I display the Composition attribute                                                            # Context\WebUser::iDisplayTheAttributes()
    And I change the "Composition" to "100% cotton"                                                    # Context\WebUser::iChangeTheTo()
    When I confirm mass edit                                                                           # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                                          # Context\WebUser::iWaitForTheJobToFinish()
    Then the product model value brand of "model-nin" should be "Nyke"                                 # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product value brand of "nin-s" should be "Nyke"                                            # Context\FixturesContext::theOfShouldBe()
    And the product value composition of "nin-s" should be "100% cotton"                               # Context\FixturesContext::theOfShouldBe()
    When I go on the last executed job resume of "edit_common_attributes"                              # Context\NavigationContext::iGoOnTheLastExecutedJobResume()
    Then I should see the text "COMPLETED"                                                             # Context\AssertionContext::assertPageContainsText()
    And I should see the text "read 2"                                                                 # Context\AssertionContext::assertPageContainsText()
    And I should see the text "updated 2"                                                              # Context\AssertionContext::assertPageContainsText()

  @critical
  Scenario: Mass edit attributes of a product model and a non variant product at the same time # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:110
    Given I am on the products grid                                                            # Context\NavigationContext::iAmOnTheGrid()
    And I select rows model-col and tool-tee                                                   # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                                      # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                         # Context\WebUser::iChooseTheOperation()
    And I display the Brand attribute                                                          # Context\WebUser::iDisplayTheAttributes()
    And I change the "Brand" to "Nyke"                                                         # Context\WebUser::iChangeTheTo()
    And I display the Composition attribute                                                    # Context\WebUser::iDisplayTheAttributes()
    And I change the "Composition" to "100% cotton"                                            # Context\WebUser::iChangeTheTo()
    And I display the Weight attribute                                                         # Context\WebUser::iDisplayTheAttributes()
    And I change the "Weight" to "500 Gram"                                                    # Context\WebUser::iChangeTheTo()
    When I confirm mass edit                                                                   # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                                  # Context\WebUser::iWaitForTheJobToFinish()
    Then the product model value brand of "model-col" should be "Nyke"                         # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product value brand of "tool-tee" should be "Nyke"                                 # Context\FixturesContext::theOfShouldBe()
    And the product model value composition of "model-col-white" should be "100% cotton"       # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product value composition of "tool-tee" should be "100% cotton"                    # Context\FixturesContext::theOfShouldBe()
    And the product "col-white-m" should have the following values:                            # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | weight | 500.0000 GRAM |
    And the product "tool-tee" should have the following values:                               # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | weight | 500.0000 GRAM |
    When I go on the last executed job resume of "edit_common_attributes"                      # Context\NavigationContext::iGoOnTheLastExecutedJobResume()
    Then I should see the text "COMPLETED"                                                     # Context\AssertionContext::assertPageContainsText()
    And I should see the text "read 4"                                                         # Context\AssertionContext::assertPageContainsText()
    And I should see the text "updated 4"                                                      # Context\AssertionContext::assertPageContainsText()

  @critical
  Scenario: Mass edit attributes of all selected products and product models             # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:137
    Given I am on the products grid                                                      # Context\NavigationContext::iAmOnTheGrid()
    And I select rows model-col                                                          # Context\DataGridContext::iSelectRows()
    And I select all entities                                                            # Context\DataGridContext::iSelectAll()
    And I press the "Bulk actions" button                                                # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                   # Context\WebUser::iChooseTheOperation()
    And I display the Brand attribute                                                    # Context\WebUser::iDisplayTheAttributes()
    And I change the "Brand" to "Nyke"                                                   # Context\WebUser::iChangeTheTo()
    And I display the Composition attribute                                              # Context\WebUser::iDisplayTheAttributes()
    And I change the "Composition" to "100% cotton"                                      # Context\WebUser::iChangeTheTo()
    And I display the Weight attribute                                                   # Context\WebUser::iDisplayTheAttributes()
    And I change the "Weight" to "500 Gram"                                              # Context\WebUser::iChangeTheTo()
    When I confirm mass edit                                                             # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                            # Context\WebUser::iWaitForTheJobToFinish()
    Then the product model value brand of "model-col" should be "Nyke"                   # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product model value composition of "model-col-white" should be "100% cotton" # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product model value brand of "model-col-white" should be "Nyke"              # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product "col-white-m" should have the following values:                      # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | brand       | Nyke          |
      | composition | 100% cotton   |
      | weight      | 500.0000 GRAM |
    And the product "tool-tee" should have the following values:                         # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | composition | 100% cotton   |
      | weight      | 500.0000 GRAM |
      | brand       | Nyke          |
    And the product model value brand of "model-nin" should be "Nyke"                    # Context\FixturesContext::theProductModelValueOfShouldBe()
    And the product "nin-s" should have the following values:                            # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | weight      | 500.0000 GRAM |
      | composition | 100% cotton   |
    When I go on the last executed job resume of "edit_common_attributes"                # Context\NavigationContext::iGoOnTheLastExecutedJobResume()
    Then I should see the text "COMPLETED"                                               # Context\AssertionContext::assertPageContainsText()
    And I should see the text "read 6"                                                   # Context\AssertionContext::assertPageContainsText()
    And I should see the text "updated 6"                                                # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Edit common attributes of many products at once
  In order to update many products with the same information
  As a product manager
  I need to be able to edit common attributes of many products at once

  Background:                               # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_scopable_localizable.feature:7
    Given a "apparel" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following products:             # Context\FixturesContext::theFollowingProduct()
      | sku          | family  | name-en_US     | name-de_DE          | customer_rating-ecommerce | customer_rating-print |
      | black_jacket | jackets | A black jacket | Eine schwarze Jacke | 1                         | 2                     |
      | white_jacket | jackets | A white jacket | Ein weier Jacke    | 3                         | 4                     |
    And I am logged in as "Julia"           # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid           # Context\NavigationContext::iAmOnTheGrid()

  @critical
  Scenario: Successfully mass edit scoped product values                                                                                                                                                     # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_scopable_localizable.feature:18
    Given I switch the scope to "Print"                                                                                                                                                                      # Context\WebUser::iSwitchTheScopeTo()
    And I select rows black_jacket and white_jacket                                                                                                                                                          # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                                                                                                                                                    # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                                                                                                                                       # Context\WebUser::iChooseTheOperation()
    Then I should see the text "Only the attributes belonging to the families of the selected products will be edited with the following data for the English (United States) locale and the Print channel." # Context\AssertionContext::assertPageContainsText()
    When I display the Customer rating attribute                                                                                                                                                             # Context\WebUser::iDisplayTheAttributes()
    And I change the "Customer rating" to "5"                                                                                                                                                                # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                                                                                                                                                                  # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                                                                                                                                                # Context\WebUser::iWaitForTheJobToFinish()
    Then the unlocalized ecommerce customer_rating of "black_jacket" should be "1"                                                                                                                           # Context\FixturesContext::theScopableAndLocalizableOfShouldBe()
    And the unlocalized ecommerce customer_rating of "white_jacket" should be "3"                                                                                                                            # Context\FixturesContext::theScopableAndLocalizableOfShouldBe()
    And the unlocalized print customer_rating of "black_jacket" should be "5"                                                                                                                                # Context\FixturesContext::theScopableAndLocalizableOfShouldBe()
    And the unlocalized print customer_rating of "white_jacket" should be "5"                                                                                                                                # Context\FixturesContext::theScopableAndLocalizableOfShouldBe()

  @critical
  Scenario: Successfully mass edit localized product values                                                                                                                                               # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_scopable_localizable.feature:35
    Given I switch the locale to "de_DE"                                                                                                                                                                  # Context\WebUser::iSwitchTheLocaleTo()
    When I switch the scope to "Ecommerce"                                                                                                                                                                # Context\WebUser::iSwitchTheScopeTo()
    And I select rows black_jacket and white_jacket                                                                                                                                                       # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                                                                                                                                                                 # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                                                                                                                                                    # Context\WebUser::iChooseTheOperation()
    Then I should see the text "Only the attributes belonging to the families of the selected products will be edited with the following data for the German (Germany) locale and the Ecommerce channel." # Context\AssertionContext::assertPageContainsText()
    When I display the Name attribute                                                                                                                                                                     # Context\WebUser::iDisplayTheAttributes()
    And I change the "Name" to "Une veste"                                                                                                                                                                # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                                                                                                                                                               # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                                                                                                                                             # Context\WebUser::iWaitForTheJobToFinish()
    Then the german localizable value name of "black_jacket" should be "Une veste"                                                                                                                        # Context\FixturesContext::theLocalizableValueOfShouldBe()
    And the german localizable value name of "white_jacket" should be "Une veste"                                                                                                                         # Context\FixturesContext::theLocalizableValueOfShouldBe()
    And the english localizable value name of "black_jacket" should be "A black jacket"                                                                                                                   # Context\FixturesContext::theLocalizableValueOfShouldBe()
    And the english localizable value name of "white_jacket" should be "A white jacket"                                                                                                                   # Context\FixturesContext::theLocalizableValueOfShouldBe()

@javascript
Feature: Edit common localized attributes of many products at once
  In order to update many products with the same information
  As a product manager
  I need to be able to edit common attributes of many products at once

  Background:                                # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_localized_attributes.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:            # Context\FixturesContext::theFollowingAttributes()
      | code   | label-en_US | type               | metric_family | default_metric_unit | decimals_allowed | negative_allowed | group |
      | weight | Weight      | pim_catalog_metric | Weight        | GRAM                | 1                | 0                | other |
      | time   | Time        | pim_catalog_number |               |                     | 1                | 0                | other |
      | date   | Date        | pim_catalog_date   |               |                     |                  |                  | other |
    And the following family:                # Context\FixturesContext::theFollowingFamilies()
      | code       | attributes                                                                                                                  |
      | high_heels | sku,name,description,price,rating,size,color,manufacturer                                                                   |
      | boots      | sku,name,manufacturer,description,weather_conditions,price,rating,side_view,top_view,size,color,lace_color,weight,time,date |
      | sandals    | sku,name,manufacturer,description,price,rating,side_view,size,color,weight,time,date                                        |
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku     | family  |
      | boots   | boots   |
      | sandals | sandals |
    And I am logged in as "Julien"           # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid            # Context\NavigationContext::iAmOnTheGrid()
    And I switch the locale to "en_US"       # Context\WebUser::iSwitchTheLocaleTo()

  @critical
  Scenario: Successfully update many metric values at once                    # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_localized_attributes.feature:28
    Given I select rows boots and sandals                                     # Context\DataGridContext::iSelectRows()
    And I press the "Actions de masse" button                                 # Context\WebUser::iPressTheButton()
    When I choose the "Modifier les valeurs dattributs" operation            # Context\WebUser::iChooseTheOperation()
    And I display the Weight attribute                                        # Context\WebUser::iDisplayTheAttributes()
    And I change the "Weight" to "600,55"                                     # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                                   # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish                 # Context\WebUser::iWaitForTheJobToFinish()
    Then the metric "Weight" of products boots and sandals should be "600.55" # Context\FixturesContext::theMetricOfProductsShouldBe()

  @critical
  Scenario: Successfully update many number values at once         # tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_localized_attributes.feature:39
    Given I select rows boots and sandals                          # Context\DataGridContext::iSelectRows()
    And I press the "Actions de masse" button                      # Context\WebUser::iPressTheButton()
    When I choose the "Modifier les valeurs dattributs" operation # Context\WebUser::iChooseTheOperation()
    And I display the Time attribute                               # Context\WebUser::iDisplayTheAttributes()
    And I change the "Time" to "25,75"                             # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                        # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish      # Context\WebUser::iWaitForTheJobToFinish()
    Then the product "boots" should have the following value:      # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | time | 25.75 |
    And the product "sandals" should have the following value:     # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | time | 25.75 |

@javascript
Feature: Apply a mass action on all entities
  In order to modify all items
  As a product manager
  I need to be able to select all entities in the grid and apply mass-edit on them

  Background:                                # tests/legacy/features/pim/enrichment/product/mass-edit/mass_actions_on_all_entities.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku         | family  | name-en_US   | categories   | price          | size | color |
      | super_boots | boots   | Super boots  | winter_boots | 10 USD, 15 EUR | 35   | blue  |
      | mega_boots  | boots   | Mega boots   | winter_boots | 10 USD, 15 EUR | 46   | red   |
      | ultra_boots | boots   | Ultra boots  | winter_boots |                | 36   | black |
      | sandals     | sandals | Tiny sandals | sandals      | 10 USD, 15 EUR | 42   | red   |
    And I am logged in as "Julia"            # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Edit family of all products, filtered by category and completeness # tests/legacy/features/pim/enrichment/product/mass-edit/mass_actions_on_all_entities.feature:18
    When I am on the products grid                                             # Context\NavigationContext::iAmOnTheGrid()
    And I hide the filter "family"                                             # Context\DataGridContext::iHideTheFilter()
    And I open the category tree                                               # Context\WebUser::iToggleTheCategoryTree()
    And I filter by "category" with operator "" and value "2014 collection"    # Context\DataGridContext::iFilterBy()
    And I filter by "category" with operator "" and value "Winter collection"  # Context\DataGridContext::iFilterBy()
    And I close the category tree                                              # Context\WebUser::iToggleTheCategoryTree()
    And I switch the scope to "Mobile"                                         # Context\WebUser::iSwitchTheScopeTo()
    And I filter by "completeness" with operator "" and value "yes"            # Context\DataGridContext::iFilterBy()
    And I select rows mega_boots                                               # Context\DataGridContext::iSelectRows()
    When I select all entities                                                 # Context\DataGridContext::iSelectAll()
    And I press the "Bulk actions" button                                      # Context\WebUser::iPressTheButton()
    And I choose the "Change family" operation                                 # Context\WebUser::iChooseTheOperation()
    And I change the Family to "Sandals"                                       # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                                    # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "update_product_value" job to finish                    # Context\WebUser::iWaitForTheJobToFinish()
    Then the family of product "super_boots" should be "sandals"               # Context\WebUser::theFamilyOfProductShouldBe()
    Then the family of product "mega_boots" should be "sandals"                # Context\WebUser::theFamilyOfProductShouldBe()
    And the family of product "ultra_boots" should be "boots"                  # Context\WebUser::theFamilyOfProductShouldBe()

@javascript
Feature: Apply a add to products to existing product model
  In order to link my products to product model
  As a product manager
  I need to be able to select products and link them to an existing product model

  Background:                                        # tests/legacy/features/pim/enrichment/product/mass-edit/mass_add_to_existing_product_model.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                    # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully adds products to product model                      # tests/legacy/features/pim/enrichment/product/mass-edit/mass_add_to_existing_product_model.feature:39
    Given I am on the "1111111171" product page                              # Context\NavigationContext::iAmOnTheProductEditPage()
    When I visit the "Product" group                                         # Context\WebUser::iVisitTheGroup()
    And I fill in the following information:                                 # Context\WebUser::iFillInTheFollowingInformation()
      | Size | S |
    And I save the product                                                   # Context\WebUser::iSave()
    And I am on the products grid                                            # Context\NavigationContext::iAmOnTheGrid()
    And I select rows 1111111171                                             # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" bottom button                             # Context\WebUser::iPressTheBottomButton()
    And I choose the "Add to an existing product model" operation            # Context\WebUser::iChooseTheOperation()
    And I fill in the following information:                                 # Context\WebUser::iFillInTheFollowingInformation()
      | Family (required)        | Accessories |
      | Product model (required) | Braided hat |
    When I confirm mass edit                                                 # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "add_to_existing_product_model" job to finish         # Context\WebUser::iWaitForTheJobToFinish()
    Then I should see the text "COMPLETED"                                   # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Updated 1"                                    # Context\AssertionContext::assertPageContainsText()
    And the parent of the product "1111111171" should be "model-braided-hat" # Pim\Behat\Context\Storage\ProductStorage::productHasParent()

@javascript
Feature: Update the product associations
  In order to associate products with other products
  As a product manager
  I need to update the product associations

  Background:                                          # tests/legacy/features/pim/enrichment/product/pef/association/update_associations.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                      # Context\NavigationContext::iAmLoggedInAs()
    And the following products:                        # Context\FixturesContext::theFollowingProduct()
      | sku       | family   | categories |
      | spongebob | clothing | tshirts    |
      | patrick   | clothing | tshirts    |
    And I am on the "spongebob" product page           # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "Associations (0)" column tab      # Context\WebUser::iVisitTheColumnTab()
    And I visit the "Cross sell (0)" association type  # Context\WebUser::iVisitTheGroup()

  @critical @purge-messenger
  Scenario: Successfully add an association                                     # tests/legacy/features/pim/enrichment/product/pef/association/update_associations.feature:19
    Given I add associations                                                    # Context\WebUser::iPressTheAddAssociationsButton()
    And I search "pat"                                                          # Context\DataGridContext::iSearch()
    And I check the row "patrick"                                               # Context\DataGridContext::iCheckTheRows()
    And the item picker basket should contain patrick                           # Pim\Behat\Context\Domain\Enrich\ItemPickerContext::theItemPickerBasketShouldContain()
    When I press the "Confirm" button in the popin                              # Context\WebUser::iPressTheButtonInThePopin()
    Then I should see product "patrick"                                         # Context\DataGridContext::iShouldSeeEntities()
    And I should see the text "1 product(s), 0 product model(s) and 0 group(s)" # Context\AssertionContext::assertPageContainsText()
    And 1 event of type "product.updated" should have been raised               # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Successfully add a product model as association                     # tests/legacy/features/pim/enrichment/product/pef/association/update_associations.feature:46
    Given I should see the text "There are no associated products"              # Context\AssertionContext::assertPageContainsText()
    And I add associations                                                      # Context\WebUser::iPressTheAddAssociationsButton()
    And I should see the text "Add Cross sell associations"                     # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Belt"                                            # Context\AssertionContext::assertPageContainsText()
    And I search "juno"                                                         # Context\DataGridContext::iSearch()
    And I check the row "juno"                                                  # Context\DataGridContext::iCheckTheRows()
    And the item picker basket should contain juno                              # Pim\Behat\Context\Domain\Enrich\ItemPickerContext::theItemPickerBasketShouldContain()
    When I press the "Confirm" button in the popin                              # Context\WebUser::iPressTheButtonInThePopin()
    Then I should see product "juno"                                            # Context\DataGridContext::iShouldSeeEntities()
    And I should see the text "0 product(s), 1 product model(s) and 0 group(s)" # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Define product prices
  In order to define a product prices
  As a regular user
  I need to be able to define prices in different currencies for each locale

  Background:                                 # tests/legacy/features/pim/enrichment/product/pef/define_product_prices.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attribute:              # Context\FixturesContext::theFollowingAttributes()
      | code        | label-en_US  | type                         | localizable | group | decimals_allowed |
      | publicPrice | Public price | pim_catalog_price_collection | 1           | other | 0                |
    And the following product:                # Context\FixturesContext::theFollowingProduct()
      | sku  | publicPrice-en_US | publicPrice-fr_FR |
      | bike | 50 EUR, 100 USD   | 150 EUR, 200 USD  |
    And I am logged in as "Mary"              # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully edit prices in french locale        # tests/legacy/features/pim/enrichment/product/pef/define_product_prices.feature:18
    Given I am on the "bike" product page                    # Context\NavigationContext::iAmOnTheProductEditPage()
    Then the product Public price in USD should be "100.00"  # Context\WebUser::theProductFieldValueShouldBe()
    And the product Public price in EUR should be "50.00"    # Context\WebUser::theProductFieldValueShouldBe()
    Given I switch the locale to "fr_FR"                     # Context\WebUser::iSwitchTheLocaleTo()
    When I change the "[publicPrice]" to "700.00 USD"        # Context\WebUser::iChangeTheTo()
    And I save the product                                   # Context\WebUser::iSave()
    Then the product [publicPrice] in USD should be "700.00" # Context\WebUser::theProductFieldValueShouldBe()
    And the product [publicPrice] in EUR should be "150.00"  # Context\WebUser::theProductFieldValueShouldBe()

@javascript
Feature: Display a variant product
  In order to enrich the catalog
  As a regular user
  I need to be able display a variant product with their specific information

  Background:                                        # tests/legacy/features/pim/enrichment/product/pef/display_variant_product.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Mary"                     # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: I can see the variant meta only in variant products # tests/legacy/features/pim/enrichment/product/pef/display_variant_product.feature:12
    When I am on the "1111111111" product page                  # Context\NavigationContext::iAmOnTheProductEditPage()
    Then I should see the text "VARIANT"                        # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Clothing by color/size"          # Context\AssertionContext::assertPageContainsText()
    When I am on the "watch" product page                       # Context\NavigationContext::iAmOnTheProductEditPage()
    Then I should not see the text "VARIANT"                    # Context\AssertionContext::assertPageNotContainsText()

@javascript
Feature: Edit a product
  In order to enrich the catalog
  As a regular user
  I need to be able edit and save a product

  Background:                                              # tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:7
    Given a "default" catalog configuration                # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I add the "english" locale to the "mobile" channel # Context\FixturesContext::iAddTheLocaleToTheChannel()
    And the following attributes:                          # Context\FixturesContext::theFollowingAttributes()
      | code        | type                 | localizable | wysiwyg_enabled | label-en_US | scopable | group |
      | description | pim_catalog_textarea | 1           | 1               | Description | 1        | other |
      | name        | pim_catalog_text     | 0           |                 | Name        | 0        | other |
      | other_name  | pim_catalog_text     | 1           |                 | Other Name  | 1        | other |
    And the following attributes:                          # Context\FixturesContext::theFollowingAttributes()
      | code   | label-en_US | type               | metric_family | default_metric_unit | group | decimals_allowed | negative_allowed |
      | length | Shoes size  | pim_catalog_metric | Length        | CENTIMETER          | other | 0                | 0                |
    And the following products:                            # Context\FixturesContext::theFollowingProduct()
      | sku    |
      | sandal |
    And the following product values:                      # Context\FixturesContext::theFollowingProductValues()
      | product | attribute   | value                                | locale | scope     |
      | sandal  | description | My awesome description for ecommerce | en_US  | ecommerce |
      | sandal  | description | My awesome description for mobile    | en_US  | mobile    |
      | sandal  | other_name  | My awesome sandals for ecommerce     | en_US  | ecommerce |
      | sandal  | other_name  | My awesome sandals for mobile        | en_US  | mobile    |
      | sandal  | name        | My sandals name                      |        |           |
      | sandal  | length      | 29 CENTIMETER                        |        |           |

  @critical @validate-migration @purge-messenger
  Scenario: Successfully create, edit and save a product          # tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:31
    Given I am logged in as "Mary"                                # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "sandal" product page                         # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "All" group                                   # Context\WebUser::iVisitTheGroup()
    And I fill in the following information:                      # Context\WebUser::iFillInTheFollowingInformation()
      | Name | My Sandal |
    When I press the "Save" button                                # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."   # Context\AssertionContext::assertPageNotContainsText()
    And the product Name should be "My Sandal"                    # Context\WebUser::theProductFieldValueShouldBe()
    And 1 event of type "product.updated" should have been raised # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Successfully updates the updated date of the product          # tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:43
    Given I am logged in as "Mary"                                        # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "sandal" product page                                 # Context\NavigationContext::iAmOnTheProductEditPage()
    And I set the updated date of the product "sandal" to "now - 10 days" # Context\FixturesContext::theProductUpdatedDateIs()
    Then the product "sandal" updated date should not be close to "now"   # Context\FixturesContext::theProductUpdatedDateShouldNotBeCloseTo()
    When I fill in the following information:                             # Context\WebUser::iFillInTheFollowingInformation()
      | Name | My edited Sandal |
    And I press the "Save" button                                         # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."           # Context\AssertionContext::assertPageNotContainsText()
    And the product "sandal" updated date should be close to "now"        # Context\FixturesContext::theProductUpdatedDateShouldBeCloseTo()

  @critical
  Scenario: Successfully add a metric attribute to a product    # tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:65
    Given I am logged in as "Julia"                             # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "sandal" product page                       # Context\NavigationContext::iAmOnTheProductEditPage()
    Then the product Shoes size should be "29 Centimeter"       # Context\WebUser::theProductFieldValueShouldBe()
    When I change the "Shoes size" to "29 Dekameter"            # Context\WebUser::iChangeTheTo()
    And I save the product                                      # Context\WebUser::iSave()
    Then I should not see the text "There are unsaved changes." # Context\AssertionContext::assertPageNotContainsText()
    And the product Shoes size should be "29 Dekameter"         # Context\WebUser::theProductFieldValueShouldBe()

  @critical
  Scenario: Successfully switch the product scope                 # tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:75
    And I am logged in as "Peter"                                 # Context\NavigationContext::iAmLoggedInAs()
    When I am on the channel creation page                        # Context\NavigationContext::iAmOnThePage()
    And I fill in the following information:                      # Context\WebUser::iFillInTheFollowingInformation()
      | Code                    | channel_code      |
      | English (United States) | The channel label |
      | Category tree           | Master catalog    |
      | Currencies              | EUR               |
      | Locales                 | French            |
    And I press the "Save" button                                 # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."   # Context\AssertionContext::assertPageNotContainsText()
    And I should be redirected to the "channel_code" channel page # Context\NavigationContext::shouldBeRedirectedToTheChannel()
    And I am on the "sandal" product page                         # Context\NavigationContext::iAmOnTheProductEditPage()
    Then I switch the scope to "channel_code"                     # Context\WebUser::iSwitchTheScopeTo()
    And I should see the text "The channel label"                 # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Edit product and filter attributes
  In order to be efficient when enriching products
  As a regular user
  I need to be able to edit a product and choose which attributes are displayed

  Background:                                             # tests/legacy/features/pim/enrichment/product/pef/edit_product_and_filter_attributes.feature:7
    Given the "footwear" catalog configuration            # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Mary"                          # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid                         # Context\NavigationContext::iAmOnTheGrid()
    And I create a product                                # Context\WebUser::iCreateAProduct()
    And I fill in the following information in the popin: # Context\WebUser::iFillInTheFollowingInformation()
      | Family | Boots |
      | SKU    | boots |
    And I press the "Save" button in the popin            # Context\WebUser::iPressTheButtonInThePopin()
    And I wait to be on the "boots" product page          # Context\NavigationContext::iWaitForTheProductEditPage()

  @critical
  Scenario: Edit the product and show only group missing required attributes by clicking on attribute group header # tests/legacy/features/pim/enrichment/product/pef/edit_product_and_filter_attributes.feature:41
    And I visit the "Product information" group                                                                    # Context\WebUser::iVisitTheGroup()
    And I click on the "info" required attribute indicator                                                         # Context\WebUser::iClickOnAttributeGroupHeader()
    Then I should not see the text "Manufacturer"                                                                  # Context\AssertionContext::assertPageNotContainsText()
    And I should not see the text "SKU"                                                                            # Context\AssertionContext::assertPageNotContainsText()
    But I should see the text "Name"                                                                               # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Weather conditions"                                                                 # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Description"                                                                        # Context\AssertionContext::assertPageContainsText()
    And I should not see the text "Price"                                                                          # Context\AssertionContext::assertPageNotContainsText()
    And I should not see the text "Rating"                                                                         # Context\AssertionContext::assertPageNotContainsText()
    And I should not see the text "Side view"                                                                      # Context\AssertionContext::assertPageNotContainsText()
    And I should not see the text "Size"                                                                           # Context\AssertionContext::assertPageNotContainsText()
    And I should not see the text "Color"                                                                          # Context\AssertionContext::assertPageNotContainsText()
    When I filter attributes with "All attributes"                                                                 # Context\WebUser::iFilterAttributes()
    Then I should see the text "Manufacturer"                                                                      # Context\AssertionContext::assertPageContainsText()
    And I should see the text "SKU"                                                                                # Context\AssertionContext::assertPageContainsText()
    And I should not see the text "Side view"                                                                      # Context\AssertionContext::assertPageNotContainsText()
    And I should not see the text "Size"                                                                           # Context\AssertionContext::assertPageNotContainsText()
    And I should not see the text "Color"                                                                          # Context\AssertionContext::assertPageNotContainsText()

@javascript
Feature: Edit a variant product
  In order to enrich the catalog
  As a regular user
  I need to be able edit and save a variant product

  Background:                                        # tests/legacy/features/pim/enrichment/product/pef/edit_variant_product.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()

  @critical @purge-messenger
  Scenario: Successfully edit and save a variant product          # tests/legacy/features/pim/enrichment/product/pef/edit_variant_product.feature:16
    Given I am logged in as "Mary"                                # Context\NavigationContext::iAmLoggedInAs()
    And I edit the "1111111119" product                           # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "Product" group                               # Context\WebUser::iVisitTheGroup()
    And I fill in the following information:                      # Context\WebUser::iFillInTheFollowingInformation()
      | Weight | 8000 Gram |
    When I press the "Save" button                                # Context\WebUser::iPressTheButton()
    Then I should not see the text "There are unsaved changes."   # Context\AssertionContext::assertPageNotContainsText()
    And the product Weight should be "8000 Gram"                  # Context\WebUser::theProductFieldValueShouldBe()
    And 1 event of type "product.updated" should have been raised # Context\ConnectivityContext::eventsOfTypeShouldHaveBeenRaised()

  @critical
  Scenario: Attributes coming from parent are read only                                  # tests/legacy/features/pim/enrichment/product/pef/edit_variant_product.feature:28
    Given I am logged in as "Mary"                                                       # Context\NavigationContext::iAmLoggedInAs()
    And I edit the "1111111119" product                                                  # Context\NavigationContext::iAmOnTheProductEditPage()
    When I visit the "Product" group                                                     # Context\WebUser::iVisitTheGroup()
    Then the field Composition should be read only                                       # Context\WebUser::theFieldShouldBeReadOnly()
    And the field Material should be read only                                           # Context\WebUser::theFieldShouldBeReadOnly()
    And I should see the text "This attribute can be updated in the attributes by Color" # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Color (Variant axis)"                                     # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Size (Variant axis)"                                      # Context\AssertionContext::assertPageContainsText()

  @critical
  Scenario: Attributes coming from common attributes are read only                      # tests/legacy/features/pim/enrichment/product/pef/edit_variant_product.feature:39
    Given I am logged in as "Mary"                                                      # Context\NavigationContext::iAmLoggedInAs()
    And I edit the "1111111119" product                                                 # Context\NavigationContext::iAmOnTheProductEditPage()
    When I visit the "Ecommerce" group                                                  # Context\WebUser::iVisitTheGroup()
    Then the field Meta title should be read only                                       # Context\WebUser::theFieldShouldBeReadOnly()
    And the field Meta description should be read only                                  # Context\WebUser::theFieldShouldBeReadOnly()
    And I should see the text "This attribute can be updated in the common attributes." # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Join an image to a product
  In order to join an image to a product
  As a regular user
  I need to be able to upload it and preview it

  Background:                                 # tests/legacy/features/pim/enrichment/product/pef/join_an_image_to_a_product.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attribute:              # Context\FixturesContext::theFollowingAttributes()
      | label-en_US | type              | allowed_extensions | group | code   |
      | Visual      | pim_catalog_image | jpg,gif            | other | visual |
    And the following family:                 # Context\FixturesContext::theFollowingFamilies()
      | code     | attributes |
      | vehicles | sku,visual |
    And the following product:                # Context\FixturesContext::theFollowingProduct()
      | sku | family   |
      | Car | vehicles |
    And I am logged in as "Mary"              # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "Car" product page        # Context\NavigationContext::iAmOnTheProductEditPage()

  @critical
  Scenario: Successfully upload an image        # tests/legacy/features/pim/enrichment/product/pef/join_an_image_to_a_product.feature:22
    When I attach file "akeneo.jpg" to "Visual" # Pim\Behat\Context\JobContext::attachFileToField()
    And I save the product                      # Context\WebUser::iSave()
    Then I should see the text "akeneo.jpg"     # Context\AssertionContext::assertPageContainsText()

@javascript @reference-data-feature-enabled
Feature: Add attribute options
  In order to define choices for a choice attribute
  As a product manager

  Background:                                  # tests/legacy/features/pim/enrichment/reference-data/attribute/add_attribute.feature:6
    Given the "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"              # Context\NavigationContext::iAmLoggedInAs()
    And I am on the attributes page            # Context\NavigationContext::iAmOnThePage()

  @critical
  Scenario: Successfully create a simple reference data                           # tests/legacy/features/pim/enrichment/reference-data/attribute/add_attribute.feature:12
    Given I create a "Reference data simple select" attribute with code "mycolor" # Context\WebUser::iCreateAnAttribute()
    And I fill in the following information:                                      # Context\WebUser::iFillInTheFollowingInformation()
      | Attribute group     | Other |
      | Reference data type | color |
    When I save the attribute                                                     # Context\WebUser::iSave()
    Then I should see the flash message "Attribute successfully created"          # Context\AssertionContext::iShouldSeeTheFlashMessage()

@javascript
Feature: Export products
  In order to use the reference data
  As a product manager
  I need to be able to export the products that have reference data

  @critical
  Scenario: Export products with reference data                         # tests/legacy/features/pim/enrichment/reference-data/export/export_products_with_reference_data.feature:8
    Given a "footwear" catalog configuration                            # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following job "csv_footwear_product_export" configuration:  # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage   | {"type": "local", "file_path": "%tmp%/product_export/product_export.csv"} |
      | with_uuid | yes                                                                       |
    And I am logged in as "Julia"                                       # Context\NavigationContext::iAmLoggedInAs()
    Given the following products:                                       # Context\FixturesContext::theFollowingProduct()
      | uuid                                 | sku      | family | categories        | price          | size | color    | name-en_US |
      | d30d502e-6136-426e-b6b8-2bc73a4eb539 | SNKRS-1B | heels  | summer_collection | 50 EUR, 70 USD | 45   | black    | Model 1    |
      | 5309a6f2-3180-4240-a23a-e14be5b6cd5d | SNKRS-1R | heels  | summer_collection | 50 EUR, 70 USD | 45   | red      | Model 1    |
      | a678277b-a4db-4617-8483-a12c754b95bc | SNKRS-1C | heels  | summer_collection | 55 EUR, 75 USD | 45   | charcoal | Model 1    |
    And the following product values:                                   # Context\FixturesContext::theFollowingProductValues()
      | product  | attribute   | value          |
      | SNKRS-1B | heel_color  | Red            |
      | SNKRS-1B | sole_fabric | Silk           |
      | SNKRS-1B | sole_color  | Blue           |
      | SNKRS-1R | heel_color  | Red            |
      | SNKRS-1R | sole_fabric | Neoprene, Silk |
      | SNKRS-1R | sole_color  | Red            |
    When I am on the "csv_footwear_product_export" export job page      # Context\NavigationContext::iAmOnTheExportJobPage()
    And I launch the export job                                         # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_product_export" job to finish      # Context\WebUser::iWaitForTheJobToFinish()
    Then exported file of "csv_footwear_product_export" should contain: # Pim\Behat\Context\Domain\Spread\ExportProfilesContext::exportedFileOfShouldContain()
      """
      uuid;sku;categories;enabled;family;groups;color;description-en_US-mobile;heel_color;manufacturer;name-en_US;price-EUR;price-USD;side_view;size;sole_color;sole_fabric;top_view
      d30d502e-6136-426e-b6b8-2bc73a4eb539;SNKRS-1B;summer_collection;1;heels;;black;;red;;Model 1;50.00;70.00;;45;blue;silk;
      5309a6f2-3180-4240-a23a-e14be5b6cd5d;SNKRS-1R;summer_collection;1;heels;;red;;red;;Model 1;50.00;70.00;;45;red;neoprene,silk;
      """

@javascript
Feature: Import attributes
  In order to reuse the attributes of my products
  As a product manager
  I need to be able to import attributes

  @critical
  Scenario: Successfully import attributes with reference data           # tests/legacy/features/pim/enrichment/reference-data/import/import_attributes.feature:8
    Given the "footwear" catalog configuration                           # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                                        # Context\NavigationContext::iAmLoggedInAs()
    And the following CSV file to import:                                # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      type;code;label-en_US;group;unique;useable_as_grid_filter;localizable;scopable;allowed_extensions;metric_family;default_metric_unit;reference_data_name;sort_order
      pim_catalog_text;shortname;Shortname;info;0;1;1;0;;;;;0
      pim_reference_data_simpleselect;mycolor;My color;info;0;1;0;0;;;;color;0
      pim_reference_data_multiselect;myfabrics;My fabrics;info;0;1;0;0;;;;fabrics;0
      
      """
    And the following job "csv_footwear_attribute_import" configuration: # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    When I am on the "csv_footwear_attribute_import" import job page     # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                          # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_attribute_import" job to finish     # Context\WebUser::iWaitForTheJobToFinish()
    Then there should be the following attributes:                       # Pim\Behat\Context\AttributeValidationContext::thereShouldBeTheFollowingAttributes()
      | type                            | code      | label-en_US | group | unique | useable_as_grid_filter | localizable | scopable | allowed_extensions | metric_family | default_metric_unit | reference_data_name | sort_order |
      | pim_catalog_text                | shortname | Shortname   | info  | 0      | 1                      | 1           | 0        |                    |               |                     |                     | 0          |
      | pim_reference_data_simpleselect | mycolor   | My color    | info  | 0      | 1                      | 0           | 0        |                    |               |                     | color               | 0          |
      | pim_reference_data_multiselect  | myfabrics | My fabrics  | info  | 0      | 1                      | 0           | 0        |                    |               |                     | fabrics             | 0          |

@javascript
Feature: Execute a job
  In order to use existing product information with reference data
  As a product manager
  I need to be able to import products

  Background:                                  # tests/legacy/features/pim/enrichment/reference-data/import/import_products.feature:7
    Given the "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following family:                  # Context\FixturesContext::theFollowingFamilies()
      | code      | attributes                             |
      | new_heels | sku,sole_fabric,lace_fabric,heel_color |
    And I am logged in as "Julia"              # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully import a csv file of products with reference data # tests/legacy/features/pim/enrichment/reference-data/import/import_products.feature:15
    Given the following CSV file to import:                                # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      sku;family;heel_color;sole_fabric;lace_fabric-en_US-tablet;lace_fabric-en_US-mobile
      SKU-001;new_heels;Red;viyella,Nylon;;Kevlar
      SKU-002;new_heels;;;Jute,Spandex;Wool,Kevlar
      SKU-003;new_heels;Magenta;Neoprene;Wool;Jute
      SKU-004;new_heels;Black;Neoprene;Spandex;Spandex
      """
    And the following job "csv_footwear_product_import" configuration:     # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    When I am on the "csv_footwear_product_import" import job page         # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                            # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_product_import" job to finish         # Context\WebUser::iWaitForTheJobToFinish()
    Then there should be 4 products                                        # Context\FixturesContext::thereShouldBeProducts()
    And the family of the product "SKU-001" should be "new_heels"          # Context\WebUser::theFamilyOfProductShouldBe()
    And product "SKU-002" should be enabled                                # Context\WebUser::productShouldBeEnabled()
    And the product "SKU-001" should have the following values:            # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | heel_color               | [red]              |
      | sole_fabric              | [nylon], [viyella] |
      | lace_fabric-en_US-tablet |                    |
      | lace_fabric-en_US-mobile | [kevlar]           |
    And the product "SKU-002" should have the following values:            # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | heel_color               |                   |
      | sole_fabric              |                   |
      | lace_fabric-en_US-tablet | [jute], [spandex] |
      | lace_fabric-en_US-mobile | [kevlar], [wool]  |
    And the product "SKU-003" should have the following values:            # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | heel_color               | [magenta]  |
      | sole_fabric              | [neoprene] |
      | lace_fabric-en_US-tablet | [wool]     |
      | lace_fabric-en_US-mobile | [jute]     |
    And the product "SKU-004" should have the following values:            # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | heel_color               | [black]    |
      | sole_fabric              | [neoprene] |
      | lace_fabric-en_US-tablet | [spandex]  |
      | lace_fabric-en_US-mobile | [spandex]  |

@javascript
Feature: Mass edit common attributes for reference data
  In order to update many products with the same reference data
  As a product manager
  I need to be able to edit common attributes of many products at once

  Background:                                # tests/legacy/features/pim/enrichment/reference-data/mass-action/edit_common_attributes.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following attributes:            # Context\FixturesContext::theFollowingAttributes()
      | code        | label-en_US | type               | metric_family | default_metric_unit | group | decimals_allowed | negative_allowed |
      | heel_height | Heel height | pim_catalog_metric | Length        | CENTIMETER          | other | 0                | 0                |
    And the following family:                # Context\FixturesContext::theFollowingFamilies()
      | code           | attributes                                                    |
      | platform_shoes | sku,name,description,color,heel_color,sole_fabric,heel_height |
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku            | family         |
      | platform_shoes | platform_shoes |
      | heels          | heels          |
    And I am logged in as "Julia"            # Context\NavigationContext::iAmLoggedInAs()
    And I am on the products grid            # Context\NavigationContext::iAmOnTheGrid()

  @critical
  Scenario: Successfully update single-valued reference data at once   # tests/legacy/features/pim/enrichment/reference-data/mass-action/edit_common_attributes.feature:23
    Given I select rows heels and platform_shoes                       # Context\DataGridContext::iSelectRows()
    And I press the "Bulk actions" button                              # Context\WebUser::iPressTheButton()
    And I choose the "Edit attribute values" operation                 # Context\WebUser::iChooseTheOperation()
    And I display the Heel color attribute                             # Context\WebUser::iDisplayTheAttributes()
    And I change the "Heel color" to "UA Red"                          # Context\WebUser::iChangeTheTo()
    And I confirm mass edit                                            # Context\WebUser::iConfirmTheMassEdit()
    And I wait for the "edit_common_attributes" job to finish          # Context\WebUser::iWaitForTheJobToFinish()
    Then the product "heels" should have the following values:         # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | heel_color | [ua-red] |
    And the product "platform_shoes" should have the following values: # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | heel_color | [ua-red] |

@javascript
Feature: Display reference data in the grid
  In order to easily see product data in the grid
  As a regular user
  I need to be able to display values for different reference data in the grid

  Background:                                # tests/legacy/features/pim/enrichment/reference-data/product/display_reference_data_in_the_grid.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Mary"             # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully display reference data values of a product # tests/legacy/features/pim/enrichment/reference-data/product/display_reference_data_in_the_grid.feature:12
    Given the following products:                                   # Context\FixturesContext::theFollowingProduct()
      | sku        | family |
      | high-heels | heels  |
    Given the following product values:                             # Context\FixturesContext::theFollowingProductValues()
      | product    | attribute   | value                  |
      | high-heels | sole_fabric | cashmerewool, neoprene |
      | high-heels | sole_color  | red                    |
    And I am on the products grid                                   # Context\NavigationContext::iAmOnTheGrid()
    And I collapse the column                                       # Context\WebUser::iCollapseTheColumn()
    When I display the columns SKU, Sole color and Sole fabric      # Context\DataGridContext::iDisplayTheColumns()
    Then the row "high-heels" should contain:                       # Context\DataGridContext::theRowShouldContain()
      | column      | value                  |
      | Sole color  | Red                    |
      | Sole fabric | Cashmerewool, Neoprene |

@javascript
Feature: Edit a product
  In order to enrich the catalog
  As a regular user
  I need to be able edit and save a product

  Background:                                # tests/legacy/features/pim/enrichment/reference-data/product/edit_product.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following products:              # Context\FixturesContext::theFollowingProduct()
      | sku        | family |
      | high-heels | heels  |

  @critical
  Scenario: Successfully add reference data values to a product     # tests/legacy/features/pim/enrichment/reference-data/product/edit_product.feature:14
    Given I am logged in as "Mary"                                  # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "high-heels" product page                       # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "Other" group                                   # Context\WebUser::iVisitTheGroup()
    And I fill in the following information:                        # Context\WebUser::iFillInTheFollowingInformation()
      | Heel color  | Tufts Blue             |
      | Sole fabric | Cashmerewool, SilkNoil |
    When I save the product                                         # Context\WebUser::iSave()
    Then I should be on the product "high-heels" edit page          # Context\NavigationContext::iShouldBeOnTheProductEditPage()
    Then the product Heel color should be "tufts-blue"              # Context\WebUser::theProductFieldValueShouldBe()
    Then the product Sole fabric should be "cashmerewool, silknoil" # Context\WebUser::theProductFieldValueShouldBe()

  @critical
  Scenario: Successfully edit reference data values to a product    # tests/legacy/features/pim/enrichment/reference-data/product/edit_product.feature:27
    Given I am logged in as "Mary"                                  # Context\NavigationContext::iAmLoggedInAs()
    And the following product values:                               # Context\FixturesContext::theFollowingProductValues()
      | product    | attribute   | value          |
      | high-heels | heel_color  | red            |
      | high-heels | sole_fabric | neoprene, silk |
    And I am on the "high-heels" product page                       # Context\NavigationContext::iAmOnTheProductEditPage()
    And I visit the "Other" group                                   # Context\WebUser::iVisitTheGroup()
    And I fill in the following information:                        # Context\WebUser::iFillInTheFollowingInformation()
      | Heel color  | Tufts Blue             |
      | Sole fabric | Cashmerewool, SilkNoil |
    When I save the product                                         # Context\WebUser::iSave()
    Then I should be on the product "high-heels" edit page          # Context\NavigationContext::iShouldBeOnTheProductEditPage()
    Then the product Heel color should be "tufts-blue"              # Context\WebUser::theProductFieldValueShouldBe()
    Then the product Sole fabric should be "cashmerewool, silknoil" # Context\WebUser::theProductFieldValueShouldBe()

@javascript
Feature: Association type creation
  In order to create a new type of association type
  As a product manager
  I need to be able to manually create an association type

  Background:                                 # tests/legacy/features/pim/structure/association-type/create_association_type.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"             # Context\NavigationContext::iAmLoggedInAs()
    And I am on the association types page    # Context\NavigationContext::iAmOnThePage()
    And I create a new association type       # Context\WebUser::iCreateANew()

  @critical
  Scenario: Successfully create an association type                    # tests/legacy/features/pim/structure/association-type/create_association_type.feature:14
    Then I should see the Code field                                   # Context\AssertionContext::iShouldSeeTheFields()
    When I fill in the following information in the popin:             # Context\WebUser::iFillInTheFollowingInformation()
      | Code | up_sell |
    And I press the "Save" button                                      # Context\WebUser::iPressTheButton()
    Then I should see the text "Association type successfully created" # Context\AssertionContext::assertPageContainsText()
    And I should be on the "up_sell" association type page             # Context\NavigationContext::iShouldBeOnTheAssociationTypePage()
    And I should see the text "up_sell"                                # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Export association types
  In order to be able to access and modify association types data outside PIM
  As a product manager
  I need to be able to export association types

  @critical
  Scenario: Successfully export association types                                               # tests/legacy/features/pim/structure/association-type/export_association_types_csv.feature:8
    Given a "footwear" catalog configuration                                                    # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following job "csv_footwear_association_type_export" configuration:                 # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%tmp%/association_type_export/association_type_export.csv"} |
    And I am logged in as "Julia"                                                               # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "csv_footwear_association_type_export" export job page                      # Context\NavigationContext::iAmOnTheExportJobPage()
    When I launch the export job                                                                # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_association_type_export" job to finish                     # Context\WebUser::iWaitForTheJobToFinish()
    Then file "%tmp%/association_type_export/association_type_export.csv" should contain 5 rows # Context\AssertionContext::fileShouldContainRows()

@javascript
Feature: Create an attribute
  In order to be able to define the properties of a product
  As a product manager
  I need to create a text attribute

  Background:                                                     # tests/legacy/features/pim/structure/attribute/create_text_attribute.feature:7
    Given the "default" catalog configuration                     # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                                 # Context\NavigationContext::iAmLoggedInAs()
    And I am on the attributes page                               # Context\NavigationContext::iAmOnThePage()
    And I create a "Text" attribute with code "short_description" # Context\WebUser::iCreateAnAttribute()

  @critical
  Scenario: Successfully create and validate a text attribute            # tests/legacy/features/pim/structure/attribute/create_text_attribute.feature:14
    Given I fill in the following information:                           # Context\WebUser::iFillInTheFollowingInformation()
      | Attribute group | Other |
    And I save the attribute                                             # Context\WebUser::iSave()
    Then I should see the flash message "Attribute successfully created" # Context\AssertionContext::iShouldSeeTheFlashMessage()

Feature: Import attributes
  In order to reuse the attributes of my products
  As a product manager
  I need to be able to import attributes

  @critical @javascript
  Scenario: Successfully import and update existing attribute            # tests/legacy/features/pim/structure/attribute/import/import_attributes.feature:67
    Given the "footwear" catalog configuration                           # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                                        # Context\NavigationContext::iAmLoggedInAs()
    And the following CSV file to import:                                # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::theFollowingFileToImport()
      """
      type;code;label-de_DE;label-en_US;label-fr_FR;group;unique;useable_as_grid_filter;localizable;scopable;available_locales;sort_order
      pim_catalog_simpleselect;manufacturer;Meine groe Code;My awesome code;Mon super code;marketing;0;1;0;0;en_US,fr_FR;3
      """
    And the following job "csv_footwear_attribute_import" configuration: # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%file to import%"} |
    When I am on the "csv_footwear_attribute_import" import job page     # Pim\Behat\Context\Domain\Collect\ImportProfilesContext::iAmOnTheImportJobPage()
    And I launch the import job                                          # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_attribute_import" job to finish     # Context\WebUser::iWaitForTheJobToFinish()
    Then I should see the text "read lines 1"                            # Context\AssertionContext::assertPageContainsText()
    Then I should see the text "updated 1"                               # Context\AssertionContext::assertPageContainsText()
    And there should be the following attributes:                        # Pim\Behat\Context\AttributeValidationContext::thereShouldBeTheFollowingAttributes()
      | type                     | code         | label-en_US     | label-de_DE      | label-fr_FR    | group     | unique | useable_as_grid_filter | localizable | scopable | localizable | scopable | available_locales | sort_order |
      | pim_catalog_simpleselect | manufacturer | My awesome code | Meine groe Code | Mon super code | marketing | 0      | 1                      | 0           | 0        | 0           | 0        | en_US,fr_FR       | 3          |

@javascript
Feature: Create attribute options
  In order to define choices for a choice attribute
  As a product manager
  I need to create options for attributes of type "Multi select" and "Simple select"

  Background:                                 # tests/legacy/features/pim/structure/attribute/option/create_attribute_options.feature:7
    Given the "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"             # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully create some attribute options                            # tests/legacy/features/pim/structure/attribute/option/create_attribute_options.feature:12
    Given I am on the attributes page                                             # Context\NavigationContext::iAmOnThePage()
    And I create a "Simple select" attribute with code "size"                     # Context\WebUser::iCreateAnAttribute()
    And I fill in the following information:                                      # Context\WebUser::iFillInTheFollowingInformation()
      | Attribute group | Other |
    When I save the attribute                                                     # Context\WebUser::iSave()
    And I visit the "Options" tab                                                 # Context\WebUser::iVisitTheTab()
    And I should not see the text "There are unsaved changes."                    # Context\AssertionContext::assertPageNotContainsText()
    And I create the following attribute options:                                 # Context\WebUser::iCreateTheFollowingAttributeOptions()
      | Code  |
      | red   |
      | blue  |
      | green |
    When I switch the "Sort automatically options by alphabetical order" to "yes" # Context\WebUser::iSwitchTheBooleanInputToValue()
    Then I should see the text "green"                                            # Context\AssertionContext::assertPageContainsText()
    When I save the attribute                                                     # Context\WebUser::iSave()
    Then I should see the flash message "Attribute successfully updated"          # Context\AssertionContext::iShouldSeeTheFlashMessage()
    And I should see the text "green"                                             # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Export options
  In order to be able to access and modify options data outside PIM
  As a product manager
  I need to be able to export options

  @critical
  Scenario: Successfully export options in CSV                         # tests/legacy/features/pim/structure/attribute/option/export_attribute_options_csv.feature:8
    Given a "footwear" catalog configuration                           # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following job "csv_footwear_option_export" configuration:  # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%tmp%/option_export/option_export.csv"} |
    And I am logged in as "Julia"                                      # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "csv_footwear_option_export" export job page       # Context\NavigationContext::iAmOnTheExportJobPage()
    When I launch the export job                                       # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_option_export" job to finish      # Context\WebUser::iWaitForTheJobToFinish()
    Then exported file of "csv_footwear_option_export" should contain: # Pim\Behat\Context\Domain\Spread\ExportProfilesContext::exportedFileOfShouldContain()
      """
      attribute;code;sort_order;label-en_US
      manufacturer;Converse;1;Converse
      manufacturer;TimberLand;2;TimberLand
      manufacturer;Nike;3;Nike
      manufacturer;Caterpillar;4;Caterpillar
      weather_conditions;dry;1;Dry
      weather_conditions;wet;2;Wet
      weather_conditions;hot;3;Hot
      weather_conditions;cold;4;Cold
      weather_conditions;snowy;5;Snowy
      rating;1;1;"1 star"
      rating;2;2;"2 stars"
      rating;3;3;"3 stars"
      rating;4;4;"4 stars"
      rating;5;5;"5 stars"
      size;35;1;35
      size;36;2;36
      size;37;3;37
      size;38;4;38
      size;39;5;39
      size;40;6;40
      size;41;7;41
      size;42;8;42
      size;43;9;43
      size;44;10;44
      size;45;11;45
      size;46;12;46
      size;60;13;60
      color;white;1;White
      color;black;2;Black
      color;blue;3;Blue
      color;maroon;4;Maroon
      color;saddle;5;Saddle
      color;greem;6;Greem
      color;red;7;Red
      color;charcoal;8;Charcoal
      lace_color;laces_black;1;Black
      lace_color;laces_brown;2;Brown
      lace_color;laces_white;3;White
      """

@javascript
Feature: Add attribute to a family
  In order to validate exported attributes
  As an administrator
  I need to be able to define which attributes belong to a family

  Background:                                # tests/legacy/features/pim/structure/family/add_attributes_to_a_family.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Peter"            # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully display all grouped family's attributes                                                              # tests/legacy/features/pim/structure/family/add_attributes_to_a_family.feature:13
    Given I am on the "sneakers" family page                                                                                  # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I visit the "Attributes" tab                                                                                          # Context\WebUser::iVisitTheTab()
    Then I should see attributes "SKU, Name, Manufacturer, Weather conditions and Description" in group "Product information" # Context\WebUser::iShouldSeeAttributesInGroup()
    And I should see attributes "Price and Rating" in group "Marketing"                                                       # Context\WebUser::iShouldSeeAttributesInGroup()
    And I should see attributes "Side view and Top view" in group "Media"                                                     # Context\WebUser::iShouldSeeAttributesInGroup()
    And I should see attribute "Size" in group "Sizes"                                                                        # Context\WebUser::iShouldSeeAttributesInGroup()
    And I should see attributes "Color and Lace color" in group "Colors"                                                      # Context\WebUser::iShouldSeeAttributesInGroup()

  @critical
  Scenario: Successfully add an attribute to a family                                                                         # tests/legacy/features/pim/structure/family/add_attributes_to_a_family.feature:24
    Given I am on the "sandals" family page                                                                                   # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I visit the "Attributes" tab                                                                                          # Context\WebUser::iVisitTheTab()
    And I add available attributes Weather conditions and Top view                                                            # Context\WebUser::iAddAvailableAttributes()
    Then I should see attributes "SKU, Name, Manufacturer, Weather conditions and Description" in group "Product information" # Context\WebUser::iShouldSeeAttributesInGroup()
    And I should see attributes "Side view and Top view" in group "Media"                                                     # Context\WebUser::iShouldSeeAttributesInGroup()

@javascript
Feature: Family creation
  In order to provide a new family for a new type of product
  As an administrator
  I need to be able to create a family

  Background:                               # tests/legacy/features/pim/structure/family/create_family.feature:7
    Given a "default" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Peter"           # Context\NavigationContext::iAmLoggedInAs()
    And I am on the families grid           # Context\NavigationContext::iAmOnTheGrid()
    And I create a new family               # Context\WebUser::iCreateANew()

  @critical
  Scenario: Successfully create a family                    # tests/legacy/features/pim/structure/family/create_family.feature:14
    Then I should see the Code field                        # Context\AssertionContext::iShouldSeeTheFields()
    When I fill the input labelled 'Code' with 'CAR'        # Context\WebUser::iFillTheInputLabelledWith()
    And I press the "Save" button                           # Context\WebUser::iPressTheButton()
    Then I should be redirected to the "CAR" family page    # Context\NavigationContext::shouldBeRedirectedToTheChannel()
    And I should see the text "Family successfully created" # Context\AssertionContext::assertPageContainsText()
    And I should see the text "[CAR]"                       # Context\AssertionContext::assertPageContainsText()

@javascript
Feature: Define the attribute requirement
  In order to ensure product completeness when exporting them
  As an administrator
  I need to be able to define which attributes are required or not for a given channel

  Background:                                # tests/legacy/features/pim/structure/family/define_the_attribute_requirement.feature:7
    Given a "footwear" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Peter"            # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "Boots" family page      # Context\NavigationContext::iAmOnTheRedoEntityEditPage()

  @critical
  Scenario: Successfully make an attribute required for a channel            # tests/legacy/features/pim/structure/family/define_the_attribute_requirement.feature:13
    Given I visit the "Attributes" tab                                       # Context\WebUser::iVisitTheTab()
    And I switch the attribute "rating" requirement in channel "mobile"      # Context\WebUser::iSwitchTheAttributeRequirementInChannel()
    And I save the family                                                    # Context\WebUser::iSave()
    And I should see the flash message "Family successfully updated"         # Context\AssertionContext::iShouldSeeTheFlashMessage()
    And I should not see the text "There are unsaved changes."               # Context\AssertionContext::assertPageNotContainsText()
    And I visit the "Attributes" tab                                         # Context\WebUser::iVisitTheTab()
    Then attribute "rating" should be required in channels mobile and tablet # Context\WebUser::attributeShouldBeRequiredInChannels()

@javascript
Feature: Export families
  In order to be able to access and modify families outside PIM
  As a product manager
  I need to be able to export families in CSV

  @critical
  Scenario: Successfully export catalog families                      # tests/legacy/features/pim/structure/family/export/export_families_csv.feature:8
    Given a "footwear" catalog configuration                          # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following job "csv_footwear_family_export" configuration: # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%tmp%/family_export/family.csv"} |
    And I am logged in as "Julia"                                     # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "csv_footwear_family_export" export job page      # Context\NavigationContext::iAmOnTheExportJobPage()
    When I launch the export job                                      # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_footwear_family_export" job to finish     # Context\WebUser::iWaitForTheJobToFinish()
    Then I should see the text "Read 5"                               # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Written 5"                             # Context\AssertionContext::assertPageContainsText()
    And exported file of "csv_footwear_family_export" should contain: # Pim\Behat\Context\Domain\Spread\ExportProfilesContext::exportedFileOfShouldContain()
      """
      code;label-en_US;attributes;attribute_as_label;requirements-mobile;requirements-tablet;attribute_as_image
      boots;Boots;color,description,lace_color,manufacturer,name,price,rating,side_view,size,sku,top_view,weather_conditions;name;color,name,price,size,sku;color,description,name,price,rating,side_view,size,sku,weather_conditions;
      heels;Heels;color,description,heel_color,manufacturer,name,price,side_view,size,sku,sole_color,sole_fabric,top_view;name;color,heel_color,name,price,size,sku,sole_color;color,description,heel_color,name,price,side_view,size,sku,sole_color;
      sneakers;Sneakers;color,description,lace_color,manufacturer,name,price,rating,side_view,size,sku,top_view,weather_conditions;name;color,name,price,size,sku;color,description,name,price,rating,side_view,size,sku,weather_conditions;
      sandals;Sandals;color,description,manufacturer,name,price,rating,side_view,size,sku;name;color,name,price,size,sku;color,description,name,price,rating,side_view,size,sku;side_view
      led_tvs;"LED TVs";color,description,manufacturer,name,price,rating,side_view,size,sku;name;color,name,price,size,sku;color,description,name,price,rating,side_view,size,sku;
      """

@javascript
Feature: Family creation
  In order to better organize my catalog
  As an administrator
  I need to be able to create a family variant

  Background:                                        # tests/legacy/features/pim/structure/family/family-variant/create_a_family_variant.feature:7
    Given a "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Peter"                    # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "Accessories" family page        # Context\NavigationContext::iAmOnTheRedoEntityEditPage()

  @critical
  Scenario: Successfully create a new family variant                                  # tests/legacy/features/pim/structure/family/family-variant/create_a_family_variant.feature:13
    Given I visit the "Variants" tab                                                  # Context\WebUser::iVisitTheTab()
    When I open the family variant creation form                                      # Context\WebUser::iOpenFamilyVariantCreationForm()
    And I fill in "code" with "accessories_color_size"                                # Context\FeatureContext::fillField()
    And I fill in "label" with "Accessories by color and size"                        # Context\FeatureContext::fillField()
    And I fill in "numberOfLevels" with "2"                                           # Context\FeatureContext::fillField()
    And I fill in the following information in the popin:                             # Context\WebUser::iFillInTheFollowingInformation()
      | Variant axis level 1 (required) | Color |
      | Variant axis level 2 (required) | Size  |
    And I press the "Create" button in the popin                                      # Context\WebUser::iPressTheButtonInThePopin()
    Then I should see the text "Family variant successfully created"                  # Context\AssertionContext::assertPageContainsText()
    Then I should see the text "Drag & drop attributes to the selected variant level" # Context\AssertionContext::assertPageContainsText()

  @critical
  Scenario: Successfully validate a family variant                                                                                       # tests/legacy/features/pim/structure/family/family-variant/create_a_family_variant.feature:27
    Given I visit the "Variants" tab                                                                                                     # Context\WebUser::iVisitTheTab()
    When I open the family variant creation form                                                                                         # Context\WebUser::iOpenFamilyVariantCreationForm()
    And I fill in "code" with "invalid code?"                                                                                            # Context\FeatureContext::fillField()
    And I fill in "label" with "This label is too long. There are are more than 100 characters in this string. It is not a valid label." # Context\FeatureContext::fillField()
    And I fill in "numberOfLevels" with "2"                                                                                              # Context\FeatureContext::fillField()
    And I press the "Create" button in the popin                                                                                         # Context\WebUser::iPressTheButtonInThePopin()
    Then I should see the text "Family variant code may contain only letters, numbers and underscores"                                   # Context\AssertionContext::assertPageContainsText()
    And I should see the text "There should be at least one attribute defined as axis for the attribute set for level \"1\""             # Context\AssertionContext::assertPageContainsText()
    And I should see the text "There should be at least one attribute defined as axis for the attribute set for level \"2\""             # Context\AssertionContext::assertPageContainsText()
    And I should see the text "This value is too long. It should have 100 characters or less."                                           # Context\AssertionContext::assertPageContainsText()
    When I fill in "code" with "valid_code"                                                                                              # Context\FeatureContext::fillField()
    And I fill in "label" with "Accessories by color and size"                                                                           # Context\FeatureContext::fillField()
    And I fill in "numberOfLevels" with "2"                                                                                              # Context\FeatureContext::fillField()
    And I fill in the following information in the popin:                                                                                # Context\WebUser::iFillInTheFollowingInformation()
      | Variant axis level 1 (required) | Color, Size |
      | Variant axis level 2 (required) | Size        |
    And I press the "Create" button in the popin                                                                                         # Context\WebUser::iPressTheButtonInThePopin()
    Then I should see the text "Variant axes must be unique, \"size\" are used several times in variant attributes sets"                 # Context\AssertionContext::assertPageContainsText()
    But I should not see the text "Family variant code may contain only letters, numbers and underscores"                                # Context\AssertionContext::assertPageNotContainsText()

@javascript
Feature: Edit family variant
  In order to provide accurate information about a family
  As an administrator
  I need to be able to edit a family variant in a family

  Background:                                          # tests/legacy/features/pim/structure/family/family-variant/edit_family_variant.feature:7
    Given the "catalog_modeling" catalog configuration # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"                      # Context\NavigationContext::iAmLoggedInAs()

  @critical
  Scenario: Successfully edit a family variant's attribute sets by removing an attribute                                                     # tests/legacy/features/pim/structure/family/family-variant/edit_family_variant.feature:12
    When the product "1111111270" should have the following values:                                                                          # Context\FixturesContext::theProductShouldHaveTheFollowingValues()
      | weight | 800.0000 GRAM |
    And the product model "PLAIN" should not have the following values "weight"                                                              # Pim\Behat\Context\Storage\ProductModelStorage::theProductShouldNotHaveTheFollowingValues()
    And I am on the "Clothing" family page                                                                                                   # Context\NavigationContext::iAmOnTheRedoEntityEditPage()
    And I visit the "Variants" tab                                                                                                           # Context\WebUser::iVisitTheTab()
    When I click on the "Clothing by color and size" row                                                                                     # Context\DataGridContext::iClickOnTheRow()
    Then I should see the text "Drag & drop attributes to the selected variant level to have these attributes managed at the variant level." # Context\AssertionContext::assertPageContainsText()
    When I remove the "Weight" attribute from the level 2                                                                                    # Pim\Behat\Context\Domain\Enrich\FamilyVariantConfigurationContext::iRemoveTheAttributeFromTheLevel()
    And I confirm the deletion                                                                                                               # Context\WebUser::iConfirmThe()
    Then the attribute "Weight" should be on the attributes level 0                                                                          # Pim\Behat\Context\Domain\Enrich\FamilyVariantConfigurationContext::theAttributeShouldBeOnTheAttributesLevel()
    When I press the "Save" button in the popin                                                                                              # Context\WebUser::iPressTheButtonInThePopin()
    Then there should be the following family variants:                                                                                      # Context\FixturesContext::thereShouldBeTheFollowingFamilyVariants()
      | code                | family   | label-en_US                | variant-axes_1 | variant-axes_2 | variant-attributes_1                                      | variant-attributes_2 |
      | clothing_color_size | clothing | Clothing by color and size | color          | size           | color,composition,material,variation_image,variation_name | size,ean,sku         |
    And I wait for the "compute_family_variant_structure_changes" job to finish                                                              # Context\WebUser::iWaitForTheJobToFinish()
    Then the variant product "1111111270" should not have the following values:                                                              # Pim\Behat\Context\Storage\ProductStorage::theVariantProductShouldNotHaveTheFollowingValues()
      | weight |

@javascript
Feature: Export family variants in CSV
  In order to be able to access and modify family variants outside PIM
  As a product manager
  I need to be able to export family variants in CSV

  @critical
  Scenario: Successfully export catalog family variants                               # tests/legacy/features/pim/structure/family/family-variant/export_family_variants_csv.feature:8
    Given a "catalog_modeling" catalog configuration                                  # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And the following job "csv_catalog_modeling_family_variant_export" configuration: # Pim\Behat\Context\JobContext::theFollowingJobConfiguration()
      | storage | {"type": "local", "file_path": "%tmp%/family_variant.csv"} |
    And I am logged in as "Julia"                                                     # Context\NavigationContext::iAmLoggedInAs()
    And I am on the "csv_catalog_modeling_family_variant_export" export job page      # Context\NavigationContext::iAmOnTheExportJobPage()
    When I launch the export job                                                      # Pim\Behat\Context\JobContext::iExecuteTheJob()
    And I wait for the "csv_catalog_modeling_family_variant_export" job to finish     # Context\WebUser::iWaitForTheJobToFinish()
    Then I should see the text "Read 8"                                               # Context\AssertionContext::assertPageContainsText()
    And I should see the text "Written 8"                                             # Context\AssertionContext::assertPageContainsText()
    And exported file of "csv_catalog_modeling_family_variant_export" should contain: # Pim\Behat\Context\Domain\Spread\ExportProfilesContext::exportedFileOfShouldContain()
      """
      code;family;label-de_DE;label-en_US;label-fr_FR;variant-axes_1;variant-axes_2;variant-attributes_1;variant-attributes_2
      clothing_color_size;clothing;"Kleidung nach Farbe und Gre";"Clothing by color and size";"Vtements par couleur et taille";color;size;variation_name,variation_image,composition,color,material;sku,weight,size,ean
      shoes_size;shoes;"Schuhe nach Gre";"Shoes by size";"Chaussures par taille";eu_shoes_size;;sku,weight,size,eu_shoes_size,ean;
      clothing_colorsize;clothing;"Kleidung nach Farbe/Gre";"Clothing by color/size";"Vtements par couleur/taille";color,size;;sku,variation_name,variation_image,composition,color,size,ean;
      clothing_size;clothing;"Kleidung nach Gre";"Clothing by size";"Vtements par taille";size;;sku,weight,size,ean;
      clothing_color;clothing;"Kleidung nach Farbe";"Clothing by color";"Vtements par couleur";color;;sku,variation_name,variation_image,composition,color,ean;
      accessories_size;accessories;"Accessories by size";"Accessories by size";"Accessoires par taille";size;;sku,weight,variation_name,size,ean;
      shoes_size_color;shoes;"Schuhe nach Gre und Farbe";"Shoes by size and color";"Chaussures par taille et couleur";size;color;weight,variation_name,size,eu_shoes_size;sku,image,variation_image,composition,color,ean
      clothing_material_size;clothing;"Clothing by material and size";"Clothing by material and size";"Vtements par matire et taille";material;size;variation_name,variation_image,composition,color,material;sku,weight,size,ean
      """

@javascript
Feature: Product group creation
  In order to manage relations between products
  As a product manager
  I need to be able to manually create a group

  Background:                                  # tests/legacy/features/pim/structure/product-group/create_product_group.feature:7
    Given the "default" catalog configuration  # Context\CatalogConfigurationContext::aCatalogConfiguration()
    And I am logged in as "Julia"              # Context\NavigationContext::iAmLoggedInAs()
    And I am on the product groups page        # Context\NavigationContext::iAmOnThePage()
    And I create a new product group           # Context\WebUser::iCreateANew()
    Then I should see the Code and Type fields # Context\AssertionContext::iShouldSeeTheFields()

  @critical
  Scenario: Successfully create a cross sell               # tests/legacy/features/pim/structure/product-group/create_product_group.feature:15
    And I should not see the Axis field                    # Context\AssertionContext::iShouldNotSeeTheFields()
    When I fill in the following information in the popin: # Context\WebUser::iFillInTheFollowingInformation()
      | Code | Cross      |
      | Type | Cross sell |
    And I press the "Save" button                          # Context\WebUser::iPressTheButton()
    And I should see the text "[Cross]"                    # Context\AssertionContext::assertPageContainsText()
    Then I am on the product groups page                   # Context\NavigationContext::iAmOnThePage()
    And I should see groups Cross                          # Context\DataGridContext::iShouldSeeEntities()

--- Skipped scenarios:

    tests/legacy/features/channel/create_channel.feature:8
    tests/legacy/features/channel/edit_channel.feature:11
    tests/legacy/features/pim/enrichment/category/create_a_category.feature:12
    tests/legacy/features/pim/enrichment/category/create_a_category.feature:20
    tests/legacy/features/pim/enrichment/category/export_categories_csv.feature:8
    tests/legacy/features/pim/enrichment/category/import_categories.feature:7
    tests/legacy/features/pim/enrichment/category/list_categories.feature:12
    tests/legacy/features/pim/enrichment/product-group/add_products_to_a_group.feature:20
    tests/legacy/features/pim/enrichment/product-model/add_product_model_children.feature:15
    tests/legacy/features/pim/enrichment/product-model/add_product_model_children.feature:79
    tests/legacy/features/pim/enrichment/product-model/add_product_model_children.feature:93
    tests/legacy/features/pim/enrichment/product-model/create_product_model.feature:13
    tests/legacy/features/pim/enrichment/product-model/create_product_model.feature:27
    tests/legacy/features/pim/enrichment/product-model/edit_product_model.feature:16
    tests/legacy/features/pim/enrichment/product-model/edit_product_model.feature:29
    tests/legacy/features/pim/enrichment/product-model/edit_product_model.feature:42
    tests/legacy/features/pim/enrichment/product-model/edit_product_model_and_filter_attributes.feature:16
    tests/legacy/features/pim/enrichment/product-model/export/export_product_models_csv.feature:12
    tests/legacy/features/pim/enrichment/product-model/import/csv/create_product_model.feature:10
    tests/legacy/features/pim/enrichment/product-model/import/csv/create_product_model.feature:23
    tests/legacy/features/pim/enrichment/product-model/import/csv/update_product_model.feature:12
    tests/legacy/features/pim/enrichment/product-model/import/csv/update_product_model.feature:33
    tests/legacy/features/pim/enrichment/product-model/import/import_and_compute_descendants.feature:20
    tests/legacy/features/pim/enrichment/product-model/import/import_business_rules.feature:44
    tests/legacy/features/pim/enrichment/product-model/import/import_business_rules.feature:58
    tests/legacy/features/pim/enrichment/product-model/import/update_product_models_when_importing_families.feature:10
    tests/legacy/features/pim/enrichment/product-model/navigate_among_variant_entities.feature:50
    tests/legacy/features/pim/enrichment/product-model/navigate_product_and_product_model_edit_page.feature:8
    tests/legacy/features/pim/enrichment/product/completeness/display_completeness.feature:25
    tests/legacy/features/pim/enrichment/product/completeness/display_completeness.feature:53
    tests/legacy/features/pim/enrichment/product/datagrid/datagrid_views.feature:113
    tests/legacy/features/pim/enrichment/product/datagrid/datagrid_views.feature:147
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_and_product_models.feature:12
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_category.feature:19
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_completeness.feature:29
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_completeness.feature:35
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_date_fields.feature:32
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_group.feature:26
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_label_or_identifier.feature:12
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_metric.feature:8
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_option_fields.feature:23
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_option_fields.feature:33
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_price.feature:8
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_products_per_text_fields.feature:12
    tests/legacy/features/pim/enrichment/product/datagrid/filtering/filter_product_per_boolean.feature:13
    tests/legacy/features/pim/enrichment/product/import/import_products.feature:13
    tests/legacy/features/pim/enrichment/product/mass-action/quick-export/quick_export.feature:59
    tests/legacy/features/pim/enrichment/product/mass-edit/classify_product_model.feature:13
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes.feature:42
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes.feature:58
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_images.feature:32
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_metric.feature:32
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:41
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:67
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:90
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:110
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_product_model.feature:137
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_scopable_localizable.feature:18
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_attributes_scopable_localizable.feature:35
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_localized_attributes.feature:28
    tests/legacy/features/pim/enrichment/product/mass-edit/edit-common-attribute/edit_common_localized_attributes.feature:39
    tests/legacy/features/pim/enrichment/product/mass-edit/mass_actions_on_all_entities.feature:18
    tests/legacy/features/pim/enrichment/product/mass-edit/mass_add_to_existing_product_model.feature:39
    tests/legacy/features/pim/enrichment/product/pef/association/update_associations.feature:19
    tests/legacy/features/pim/enrichment/product/pef/association/update_associations.feature:46
    tests/legacy/features/pim/enrichment/product/pef/define_product_prices.feature:18
    tests/legacy/features/pim/enrichment/product/pef/display_variant_product.feature:12
    tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:31
    tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:43
    tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:65
    tests/legacy/features/pim/enrichment/product/pef/edit_product.feature:75
    tests/legacy/features/pim/enrichment/product/pef/edit_product_and_filter_attributes.feature:41
    tests/legacy/features/pim/enrichment/product/pef/edit_variant_product.feature:16
    tests/legacy/features/pim/enrichment/product/pef/edit_variant_product.feature:28
    tests/legacy/features/pim/enrichment/product/pef/edit_variant_product.feature:39
    tests/legacy/features/pim/enrichment/product/pef/join_an_image_to_a_product.feature:22
    tests/legacy/features/pim/enrichment/reference-data/attribute/add_attribute.feature:12
    tests/legacy/features/pim/enrichment/reference-data/export/export_products_with_reference_data.feature:8
    tests/legacy/features/pim/enrichment/reference-data/import/import_attributes.feature:8
    tests/legacy/features/pim/enrichment/reference-data/import/import_products.feature:15
    tests/legacy/features/pim/enrichment/reference-data/mass-action/edit_common_attributes.feature:23
    tests/legacy/features/pim/enrichment/reference-data/product/display_reference_data_in_the_grid.feature:12
    tests/legacy/features/pim/enrichment/reference-data/product/edit_product.feature:14
    tests/legacy/features/pim/enrichment/reference-data/product/edit_product.feature:27
    tests/legacy/features/pim/structure/association-type/create_association_type.feature:14
    tests/legacy/features/pim/structure/association-type/export_association_types_csv.feature:8
    tests/legacy/features/pim/structure/attribute/create_text_attribute.feature:14
    tests/legacy/features/pim/structure/attribute/import/import_attributes.feature:67
    tests/legacy/features/pim/structure/attribute/option/create_attribute_options.feature:12
    tests/legacy/features/pim/structure/attribute/option/export_attribute_options_csv.feature:8
    tests/legacy/features/pim/structure/family/add_attributes_to_a_family.feature:13
    tests/legacy/features/pim/structure/family/add_attributes_to_a_family.feature:24
    tests/legacy/features/pim/structure/family/create_family.feature:14
    tests/legacy/features/pim/structure/family/define_the_attribute_requirement.feature:13
    tests/legacy/features/pim/structure/family/export/export_families_csv.feature:8
    tests/legacy/features/pim/structure/family/family-variant/create_a_family_variant.feature:13
    tests/legacy/features/pim/structure/family/family-variant/create_a_family_variant.feature:27
    tests/legacy/features/pim/structure/family/family-variant/edit_family_variant.feature:12
    tests/legacy/features/pim/structure/family/family-variant/export_family_variants_csv.feature:8
    tests/legacy/features/pim/structure/product-group/create_product_group.feature:15

100 scenarios (100 skipped)
1319 steps (1319 skipped)
0m4.43s (84.49Mb)
